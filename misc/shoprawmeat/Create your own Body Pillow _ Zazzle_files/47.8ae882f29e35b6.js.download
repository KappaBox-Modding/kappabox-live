(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[47],{1079:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var a=i(2),s=i(869),c=i.n(s),n=i(659);const r={icons:[],loading:null,pageSize:60,query:"",total:null};const o={zazzleImages:function(e=r,t){switch(t.type){case n.b.SEARCH:return t.query?e:Object(a.a)(Object(a.a)({},r),{},{pageSize:t.pageSize});case n.b.RECEIVE_PAGE:{const{nextPageId:i,pageSize:a,query:s,total:n}=t,r=s===e.query&&a===e.pageSize?[...e.icons,...t.icons]:t.icons;return{icons:c()(r,e=>e.id),loading:null,nextPageId:i,pageSize:a,query:s,total:n}}case n.b.SET_LOADING:return Object(a.a)(Object(a.a)({},e),{},{loading:t.loading});default:return e}}}},1080:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));const a={tags:[]};function s(e=a){return e}},1365:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var a=i(1),s=i(47),c=i(4),n=i(8),r=i(170),o=i(154),l=i(659);function*d(e){const t=yield Object(a.k)();if(e.type===l.b.SEARCH&&!e.query)return;yield Object(a.i)(l.a.setLoading({loading:e.type===l.b.SEARCH?"search":"nextPage"}));const i=e.type===l.b.SEARCH?{pageSize:e.pageSize,query:e.query}:{nextPageId:t.zazzleImages.nextPageId,pageSize:t.zazzleImages.pageSize,query:t.zazzleImages.query};let s;try{s=yield Object(a.c)(c.c,"/svc/my/mediabrowser/getZazzleImagePage",i,{enableCsrf:!1})}catch(n){}s&&s.success?yield Object(a.i)(l.a.receivePage(s.data)):yield Object(a.i)(l.a.setLoading({loading:null}))}function*u(e){let t;try{t=yield Object(a.c)(c.c,"/svc/my/mediabrowser/uploadNounProjectImage",{nounId:e.nounId})}catch(i){}if(t&&t.success)e.cb&&e.cb(t.data);else{const t=Object(n.a)(yield Object(a.k)()),i=Object(r.a)({content:t("zi_myzazzle_MediaBrowser_ZazzleImages_Error"),type:"Error"});yield Object(a.i)(Object(o.e)(i)),e.cb&&e.cb()}}function*b(){yield Object(a.b)([Object(s.a)([l.b.SEARCH,l.b.NEXT_PAGE],d),Object(a.p)(l.b.UPLOAD,u)])}},264:function(e,t,i){"use strict";function a(e){const t=e;return null!=t.annotation&&t.annotation.length>0&&null!=t.grid&&12===t.grid.length}function s(e){const t=e;return null!=t&&null!=t.Code&&null!=t.Exception}i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s}))},302:function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"d",(function(){return K})),i.d(t,"e",(function(){return D})),i.d(t,"b",(function(){return P})),i.d(t,"c",(function(){return T}));var a,s=i(2),c=i(3),n=i(220),r=i.n(n),o=i(109),l=i.n(o),d=i(48),u=i.n(d),b=i(227),p=i(13),O=i(209),y=i(120),j=i(51),g=i(264);class m{constructor(e,t={},i=[],a,s=1){Object(c.a)(this,"actions",[]),Object(c.a)(this,"clientVersion",void 0),Object(c.a)(this,"endTime",void 0),Object(c.a)(this,"endpoint",void 0),Object(c.a)(this,"params",void 0),Object(c.a)(this,"startTime",void 0),Object(c.a)(this,"version",1),a=Object(p.c)(a,{output:"js"}),Object.assign(this,{actions:i,clientVersion:e,endpoint:a,version:s}),this.params={coordspace:"design",max_dim:600},Object.assign(this.params,t)}getResponseTime(){return this.startTime&&this.endTime?this.endTime-this.startTime:Number.MAX_VALUE}callServer(){const e=!this.startTime;return e&&(this.startTime=Date.now()),this.callServerRaw().then(t=>(e&&(this.endTime=Date.now(),this.params.internal&&console.log(`Design client response time: ${this.getResponseTime()}ms`)),Object(g.b)(t)?t:this.transformResponse(t)))}toString(){let e=`<edit version="${this.version}">`;return e=this.paramsToString(e),e=this.actionsToString(e,this.actions),e=e.concat("</edit>"),e}setParam(e,t){this.params[e]=t}setParams(e){Object.assign(this.params,e)}addAction(e){return this.actions.push(e),this}transformResponse(e){let t=e.design;t.serverState="ready",t.coordspace=this.params.coordspace,t.canpublishIgnorePO=!!e.canpublishignorepo,delete e.canpublishignorepo,t.candigital=!!e.candigital,["canpublish","changed","csamode","globalrevision","paste","redo","revision","undo","wmmindim"].forEach(i=>{null!=e[i]&&(t[i]=e[i])}),e.selection&&(t.selection=Object(p.n)(e.selection)),t=this.transformResponseDesign(e.design);const i=t.attributes.view;if(null!=i&&null!=e.wireframes){let a=t.views[i];null==a&&(a=t.views[i]={viewid:i}),a.annotations=e.wireframes.filter(e=>Object(g.a)(e))}return delete e.wireframes,t}area(e,t,i){const a={};return null!=e?a.name=this.getName(e):(a.group=t,a.orientation=i),this.addAction({name:"area",attributes:a})}chgarea(e,t,i){return this.addAction({name:"chgarea",attributes:{from:this.getName(e),to:this.getName(t),fillmode:i}})}clearud(e){return this.addAction({name:"clearud",attributes:{name:e}})}colors(e,t,i){return this.addAction({name:"colors",attributes:{count:e,value:t?t.join():void 0,reset:i}})}copy(){return this.addAction({name:"copy"})}cut(){return this.addAction({name:"cut"})}dategrid(e){return this.addAction({name:"dategrid",attributes:u()(e,"name","override","month","year","culture","holidays","style","transparent","namespace","nocache","style_xml")})}delarea(e){return this.addAction({name:"delarea",attributes:{name:this.getName(e)}})}delete(){return this.addAction({name:"delete"})}embed(e){const t=this.pickEmbedSetAttributes(e);return Object.assign(t,u()(e,"fitmode","name","override")),this.addAction({name:"embed",attributes:t})}fill(e){const t=P(e);return this.addAction({name:"fill",attributes:t})}filter(e,t=!0){const i=u()(e,"type","source","params");return i.cleansources=t,this.addAction({name:"filter",attributes:i})}filters(e,t=!0){return this.addAction({name:"filters",attributes:{cleansources:t},content:e.map(e=>({name:"filter",attributes:u()(e,"type","source","params")}))})}finish(e,t){return this.addAction({name:"finish",attributes:{forsale:e,notemplate:t}})}flip(e,t,i=!1){return this.addAction({name:"flip",attributes:{x:e,y:t,group:i}})}focusarea(e,t=!0){return this.addAction({name:"focusarea",attributes:{outline:e,resize:t}})}font(e){const t=T(e);return this.addAction({name:"font",attributes:t})}getupdatedattributes(){return this.addAction({name:"getupdatedattributes"})}group(e={}){const t=this.pickGroupSetAttributes(e);return Object.assign(t,u()(e,"name","override")),this.addAction({name:"group",attributes:t})}image(e){const t=this.pickImageSetAttributes(e);return Object.assign(t,u()(e,"name","override")),this.addAction({name:"image",attributes:t})}layer(e){return this.addAction({name:"layer",attributes:{name:e}})}layout(e,t=!1){const i="string"==typeof e.layoutparams?e.layoutparams:p.a.toString(e.layoutparams);return t?this.addAction({name:"set",attributes:{layout:e.type,layoutparams:i}}):this.addAction({name:"layout",attributes:{type:e.type,layoutparams:i}})}move(e){return this.addAction({name:"move",attributes:u()(e,"x","y","dx","dy","space","target")})}paste(){return this.addAction({name:"paste"})}path(e){const t=this.pickPathSetAttributes(e);return Object.assign(t,u()(e,"name","override")),this.addAction({name:"path",attributes:t})}qrcode(e){let t=e.value;delete e.value;const i=this.pickQRCodeSetAttributes(e);Object.assign(i,u()(e,"name","override"));let a={name:"qrcode",attributes:i};return t&&(a.content=[{name:"value",content:t}]),this.addAction(a)}redo(){return this.addAction({name:"redo"})}removeud(e){return this.addAction({name:"removeud",attributes:{name:e}})}reorder(e=""){return this.addAction({name:"reorder",attributes:{above:this.getName(e)}})}rotate(e,t){return this.addAction({name:"rotate",attributes:{angle:e,abs:t}})}save(){return this.addAction({name:"save"})}saveFeatures(){return this.addAction({name:"savefeatures"})}scale(e){const t=u()(e,"abs","space","xscale","yscale");return null!=e.mode&&(t.scale=e.mode),this.addAction({name:"scale",attributes:t})}select(...e){return this.addAction({name:"select",attributes:{name:e.map(e=>this.getName(e)).join()}})}selectAll(){return this.addAction({name:"select",attributes:{name:"*"}})}set(e){return this.addAction({name:"set",attributes:e})}setEmbed(e){return this.set(this.pickEmbedSetAttributes(e))}setGroup(e){return this.set(this.pickGroupSetAttributes(e))}setImage(e){return this.set(this.pickImageSetAttributes(e))}setObject(e){return this.set(this.pickObjectSetAttributes(e))}setPath(e){return this.set(this.pickPathSetAttributes(e))}setQRCode(e){return this.set(this.pickQRCodeSetAttributes(e))}setText(e){return this.set(this.pickTextSetAttributes(e))}setud(e,t){return this.addAction({name:"setud",attributes:{name:e,value:t}})}sourceProduct(e,t){return this.addAction({name:"sourceproduct",attributes:{group:t,productid:e}})}template(e,t,i,a){return this.addAction({name:"template",attributes:{forcereplace:a,urlkey:e,title:t,ppshow:i}})}text(e){let t=e.value;delete e.value;const i=this.pickTextSetAttributes(e);Object.assign(i,u()(e,"name","override"));let a={name:"text",attributes:i};return t&&(a.content=[{name:"value",content:t}]),this.addAction(a)}transfer(e){return this.addAction({name:"transfer",attributes:{area:this.getName(e)}})}undo(e=0){return this.addAction({name:"undo",attributes:{revision:e}})}ungroup(){return this.addAction({name:"ungroup"})}viewdata(){return this.addAction({name:"viewdata"})}pickEmbedSetAttributes(e){const t=this.pickObjectSetAttributes(e);return Object.assign(t,u()(e,"designid","productid")),t.params=e.params,e.embedarea&&(t.area=this.getName(e.embedarea)),t}pickGroupSetAttributes(e){const t=this.pickObjectSetAttributes(e);return Object.assign(t,u()(e,"clip")),t}pickImageSetAttributes(e){const t=this.pickObjectSetAttributes(e);return Object.assign(t,u()(e,"aligni","alphasynth","annotation","fillmode","filter","flipx","flipy","imageid","maxcolors","url","whitetransparent","whitebtransparent")),null!=e.crop&&(t.crop=e.crop.join()),null!=e.usercolors&&(t.usercolors=e.usercolors.join()),null!=e.xformi&&(t.xformi=e.xformi.join()),t}pickObjectSetAttributes(e){const t=u()(e,"bgcolor","locked","name","ontop","showalways","visible");return null!=e.layout&&(t.layout=e.layout.type,t.layoutparams=p.a.toString(e.layout.layoutparams)),t}pickPathSetAttributes(e){const t=this.pickObjectSetAttributes(e);return Object.assign(t,u()(e,"annotation","cornerradius","imageid","linecap","linejoin","maxcolors","miterlimit","segments","shape")),Object.assign(t,P(e)),null!=e.colors&&(t.colors=e.colors.join()),t}pickQRCodeSetAttributes(e){const t=this.pickObjectSetAttributes(e);return Object.assign(t,u()(e,"value")),null!=e.colors&&(t.colors=e.colors.join()),t}pickTextSetAttributes(e){const t=this.pickObjectSetAttributes(e);return Object.assign(t,u()(e,"align","arcradius","clip","linespacing","palign","path","pathalign","pathauto","pathdir","pathobj","pathpos","pathref","scalemode","value","wrap")),Object.assign(t,T(e)),t}getName(e){return"string"==typeof e?e:e.name}paramsToString(e){e=e.concat("<params");for(let t in this.params)if(null!=this.params[t]){const i=this.xmlSafe(this.params[t].toString(),!0);e=e.concat(` ${t}="${i}"`)}return e=e.concat("/>")}actionsToString(e,t){for(let i of t)if(null!=i){if(e=e.concat("<"+i.name),null!=i.attributes)for(let a in i.attributes)if(null!=i.attributes[a]){const t=this.xmlSafe(i.attributes[a].toString(),!0);e=e.concat(` ${a}="${t}"`)}const t=i.content;null!=t?(e=e.concat(">"),e=(e="string"==typeof t?e.concat(this.xmlSafe(t,!1)):this.actionsToString(e,t)).concat(`</${i.name}>`)):e=e.concat("/>")}return e}xmlSafe(e,t){const i=t?/[&\n\r"'<>]/g:/[&<>]/g;return e.replace(i,this.getEncodedCharacter)}getEncodedCharacter(e){return m.entitiesToEncodeMap[e]}objectPredicate(e){return"full"===this.clientVersion||("group"===e.type||"text"===e.type||"path"===e.type||("image"===e.type?!e.filtersource:"qrcode"===e.type&&"z4qrcode"===this.clientVersion))}templatePredicate(e){return"full"===this.clientVersion||(!!(e.type&(O.c.Text|O.c.Image))||!!(e.type&O.c.QRCode)&&"z4qrcode"===this.clientVersion)}transformResponseDesign(e){const t=e;t.attributes=p.a.fromString(e.attributes);const i=t.attributes.view,a={};let s=null;null!=i&&(s=a[i]={viewid:i,areas:{}},t.activeView=i),t.views=a;const c={};if(null!=e.areas)for(const r of e.areas)null==t.activeArea&&r.isdefault&&(t.activeArea=r.name),null!=s&&(r.isdefault&&(s.defaultarea=r.name),s.areas[r.name]=u()(r,"grid","outline","paths","visible","wireframe"),r.variable&&(s.variable=!0)),c[r.name]=this.transformResponseArea(r);if(t.areas=c,null!=e.constraints)for(const r of e.constraints)f(r);else t.constraints=[];const n=t.templates||[];return t.templates=n.filter(e=>this.templatePredicate(e)),delete e.updatedtemplateattributes,delete e.updatedtemplateattributesxml,delete e.updatedtemplateobjects,delete e.version,t}transformResponseArea(e){const t=e;null!=e.colors&&(t.colors=Object(p.n)(e.colors)),null!=e.threads&&(t.threads=Object(p.n)(e.threads).map(e=>+e));const i={};t.childnames=[],null!=e.objects&&e.objects.forEach(e=>{const a=this.transformResponseObject(e,t.name,"Fg",i);this.objectPredicate(a)&&(t.childnames.push(a.name),i[a.name]=a)}),t.objects=i;const a={};e.glyphs&&e.glyphs.forEach(e=>{a[e.n]=e}),t.glyphs=a;const s=h(e.properties);t.filter=v(s,"filter");const c=k(s);if(null!=c&&(t.layout=c),delete e.bounds,delete e.grid,delete e.isdefault,delete e.outline,delete e.paths,delete e.properties,delete e.visible,delete e.version,e.layers)for(let n=0;n<e.layers.length;n++){const a=this.transformResponseLayer(e.layers[n],t.name,i);t.layers[n]=a}return t.layers||(t.layers=[]),t.layers.push({changed:t.changed,childnames:t.childnames,name:"Fg"}),t}transformResponseLayer(e,t,i){const a=e;return a.childnames=[],null!=e.objects&&e.objects.forEach(s=>{const c=this.transformResponseObject(s,t,e.name,i);this.objectPredicate(c)&&(a.childnames.push(c.name),i[c.name]=c)}),delete e.objects,a}transformResponseObject(e,t,i,s){let c=e;c.area=t,c.layer=i,null!=e.colors&&(c.colors=Object(p.n)(e.colors));const n=h(e.properties);e.properties=n,c.childnames=[],c.flipx=S(n,"flipx"),c.flipy=S(n,"flipy");const r=k(n);switch(null!=r&&(c.layout=r),c.locked=S(n,"locked"),c.ontop=S(n,"ontop"),c.showalways=S(n,"showalways"),c.sourcename=v(n,"sourcename"),c.visible=S(n,"visible"),this.params.internal&&(c.originallocked=c.locked,c.locked=!1,c.originalshowalways=c.showalways,c.showalways=!1),c.type){case"embed":c=function(e){const t=e,i=e.properties;return t.designid=v(i,"designid"),t.embedarea=v(i,"area"),t.params=v(i,"params"),t.productid=v(i,"productid"),t}(e);break;case"group":c=function(e){const t=e,i=e.properties;return t.clip=S(i,"clip"),t}(e);break;case"image":c=function(e){const t=e,i=e.properties;return t.aligni=_(i,"aligni"),t.alphasynth=_(i,"alphasynth"),t.annotation=v(i,"annotation"),t.crop=E(i,"crop"),t.fillmode=v(i,"fillmode"),t.filter=v(i,"filter"),t.filtersource=_(i,"filtersource"),t.imageaspectratio=_(i,"imageaspectratio"),t.imageid=v(i,"imageid"),t.imagetype=function(e,t,i,a,s){const c=A(e,t,i,a);return c?t[c]:s}(i,j.a,!0,"imagetype"),t.ispartner=S(i,"ispartner"),t.maxcolors=_(i,"maxcolors"),t.physheight=_(i,"physheight"),t.physwidth=_(i,"physwidth"),t.state=A(i,a,!0,"state"),t.title=v(i,"title"),t.usercolors=I(i,"colors"),t.whitetransparent=S(i,"whitetransparent"),t.whitebtransparent=S(i,"whitebtransparent"),t.xformi=E(i,"xformi"),t}(e);break;case"path":c=function(e){const t=e,i=e.properties;return t.annotation=v(i,"annotation"),t.cornerradius=_(i,"cornerradius"),t.fill={fillcolor:v(i,"fillcolor"),filltype:v(i,"filltype"),strokecolor:v(i,"strokecolor"),strokescale:S(i,"strokescale"),strokewidth:_(i,"strokewidth")},t.imageid=v(i,"imageid"),t.linecap=v(i,"linecap"),t.linejoin=v(i,"linejoin"),t.miterlimit=_(i,"miterlimit"),t.maxcolors=_(i,"maxcolors"),t.segments=v(i,"segments")||"",t.shape=v(i,"shape"),t.title=v(i,"title"),t}(e);break;case"qrcode":c=function(e){const t=e,i=e.properties;return t.colors=I(i,"colors"),t.value=v(i,"value"),t}(e);break;case"text":c=function(e){const t=e,i=e.properties;return t.align=v(i,"align"),t.arcradius=_(i,"arcradius"),t.clip=S(i,"clip"),t.linespacing=_(i,"linespacing"),t.palign=v(i,"palign"),t.path=v(i,"path"),t.pathalign=v(i,"pathalign"),t.pathauto=_(i,"pathauto"),t.pathdir=_(i,"pathdir"),t.pathobj=v(i,"pathobj"),t.pathpos=_(i,"pathpos"),t.pathref=v(i,"pathref"),t.scalemode=v(i,"scalemode"),t.value=v(i,"value"),t.wrap=S(i,"wrap"),t}(e)}return e.objects&&e.objects.forEach(e=>{const a=this.transformResponseObject(e,t,i,s);this.objectPredicate(a)&&(c.childnames.push(a.name),s[a.name]=a)}),delete e.objects,delete e.properties,c}}function f(e){const t=e;return t.objects=Object(p.n)(e.objects),t.urlkeys=Object(p.n)(e.urlkeys),t}function h(e){const t={};return null!=e&&e.forEach(e=>t[e.name]=e.value),t}function v(e,t,i){let a=i;return null!=e[t]&&(a=e[t]),a}function S(e,t,i){const a=v(e,t);return null!=a?"true"===a:i}function A(e,t,i,a,s){if(i){const i=Object.values(t).filter(e=>"number"!=typeof e).reduce((e,t)=>(e[t.toLowerCase()]=t,e),{}),c=v(e,a,"");return c&&i[c.toLowerCase()]||s}const c=_(e,a);return c&&t[c]||s}function _(e,t,i){const a=v(e,t);return null!=a?+a:i}function I(e,t,i){const a=v(e,t);return null!=a?Object(p.n)(a):i}function E(e,t,i){const a=I(e,t);return null!=a?a.map(e=>+e):i}function k(e){const{layout:t,layoutparams:i}=e;return null!=t?{type:t,layoutparams:p.a.fromString(i)}:null}function C(e){const t=Object(y.f)(e).filter(e=>"text"===e.type);if(1===t.length||t.length>1&&null==e.activeFont){const i=t[0];i&&i.styles&&i.styles.length>0&&(e.activeFont=i.styles[0])}}function K(e,t,i=!1){if(!e)return t;let a=l()(e);const c=a.areas;if(a=Object(b.a)(Object(s.a)(Object(s.a)({},a),{},{areas:{},attributes:{}}),t),!i){for(let e in c){let t=a.areas[e];t?t.changed||(a.areas[e]=c[e]):(t=l()(c[e]),t.objects={},t.childnames=[],t.fill=void 0,a.areas[e]=t)}null!=e.activeArea&&(a.activeArea=e.activeArea),null!=e.activeView&&(a.activeView=e.activeView)}if(i)for(const s of Object.values(a.views))s.variable&&(s.hasGrids=!1);if(C(a),a.changed&&(a.timestamp=(new Date).getTime()),a.selection){const e=a.areas[a.activeArea],t=r()(e.childnames,a.selection);a.selection=t}return a.activeLayer="Fg",a}function D(e,t,i){const a=Object(b.a)(e,t,i);return null!=t.selection&&C(a),a}function P(e){return u()(e,"fillcolor","filltype","strokecolor","strokescale","strokewidth")}function T(e){return u()(e,"color","end","face","fontmaxheight","fontminheight","height","letterspacing","maxheight","minheight","start")}Object(c.a)(m,"entitiesToEncodeMap",{"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;","\n":"&#10;","\r":"&#13;"}),function(e){e[e.Done=0]="Done",e[e.Pending=1]="Pending",e[e.Ordered=2]="Ordered"}(a||(a={}))},391:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));var a,s=i(2),c=i(17);!function(e){e.ADD_COLLABORATOR="Collab/ADDD_COLLABORATOR",e.ADD_COLLABORATORS_VIA_EMAIL="Collab/ADDD_COLLABORATORS_VIA_EMAIL",e.ADD_IMAGES="Collab/ADD_IMAGES",e.CREATE_NEW="Collab/CREATE_NEW",e.END_LIVE_JOB="Collab/END_LIVE_JOB",e.GIVE_CONTROL="Collab/GIVE_CONTROL",e.INFORM_UI_CHANGED="Collab/INFORM_UI_CHANGED",e.INITIALIZE_EXISTING="Collab/INITIALIZE_EXISTING",e.REMOVE_COLLABORATOR="Collab/REMOVE_COLLABORATOR",e.REQUEST_END_SESSION="Collab/REQUEST_END_SESSION",e.RESPOND_END_SESSION="Collab/RESPOND_END_SESSION",e.SET_PRIVACY="Collab/SET_PRIVACY",e.UPDATE_STATE="Collab/UPDATE_STATE",e.YIELD_TO_OWNER="Collab/YIELD_TO_OWNER"}(a||(a={}));const n={addCollaborator:(e,t)=>Object(c.b)(a.ADD_COLLABORATOR,e,t),addCollaboratorsViaEmail:(e,t)=>Object(c.b)(a.ADD_COLLABORATORS_VIA_EMAIL,e,t),addImages:(e,t)=>Object(c.b)(a.ADD_IMAGES,e,t),createNew:(e,t)=>Object(c.a)(a.CREATE_NEW,Object(s.a)({designStateKey:e},t)),endLiveJob:(e,t)=>Object(c.b)(a.END_LIVE_JOB,e,t),giveControl:(e,t)=>Object(c.b)(a.GIVE_CONTROL,e,t),informUiChanged:(e,t)=>Object(c.b)(a.INFORM_UI_CHANGED,e,{uiState:t}),initializeExisting:e=>Object(c.a)(a.INITIALIZE_EXISTING,e),removeCollaborator:(e,t)=>Object(c.b)(a.REMOVE_COLLABORATOR,e,t),requestEndSession:e=>Object(c.b)(a.REQUEST_END_SESSION,e),respondEndSession:(e,t=!1)=>Object(c.b)(a.RESPOND_END_SESSION,e,{decision:t}),setPrivacy:(e,t)=>Object(c.b)(a.SET_PRIVACY,e,{isPublic:t}),updateState:(e,t)=>Object(c.b)(a.UPDATE_STATE,e,{payload:t}),yieldControlToOwner:e=>Object(c.b)(a.YIELD_TO_OWNER,e)}},406:function(e,t,i){"use strict";i.d(t,"d",(function(){return it})),i.d(t,"e",(function(){return at})),i.d(t,"c",(function(){return ut})),i.d(t,"b",(function(){return Ot})),i.d(t,"a",(function(){return ft}));var a=i(15),s=i(2),c=i(100),n=i.n(c),r=i(416),o=i.n(r),l=i(150),d=i.n(l),u=i(146),b=i.n(u),p=i(723),O=i.n(p),y=i(220),j=i.n(y),g=i(26),m=i.n(g),f=i(24),h=i.n(f),v=i(197),S=i(1),A=i(120),_=i(264),I=i(724),E=i.n(I),k=i(224),C=i.n(k),K=i(98),D=i.n(K),P=i(61),T=i.n(P),w=i(221),R=i.n(w),z=i(139),x=i.n(z),N=i(99),M=i.n(N),L=i(131),F=i.n(L),G=i(182),V=i.n(G),B=i(209),U=i(159),q=i(453),$=i(156),J=i(254),H=i(181),W=i(198);const Z={DialogCheckAdult:()=>!0,DialogCheckBleed:e=>{const t=e.sides.filter(e=>e.imagesWithBleedIssues.length>0);if(t.length>0)return d()(t.map(e=>[e.areaGroupInfo.name,e.imagesWithBleedIssues]))},DialogCheckDesignReview:e=>e.product.isReportViolationReviewPending||e.product.displayReportViolationWarningOnCustomize&&e.isCustomizing,DialogCheckFaux:()=>!0,DialogCheckForceSelect:e=>{if(e.forceSelectFails.length>0)return e.forceSelectFails.join("|")},DialogCheckResolution:e=>{const t=e.sides.filter(e=>e.imagesWithResolutionIssues.length>0);if(t.length>0)return d()(t.map(e=>[e.areaGroupInfo.name,e.imagesWithResolutionIssues]))},DialogCheckSides:e=>{const t=e.sides.filter(e=>e.isBlank&&!e.areaGroupInfo.process.isSimpleText);if(t.length>0)return d()(t.map(e=>[e.area.name,e.isBlank]))},DialogCheckSimpletext:e=>{const t=e.sides.filter(e=>e.isSimpleTextAndIncomplete);if(t.length>0)return d()(t.map(e=>{const t=V()(e.area.objects,()=>!0);return[e.area.name,t?t.value:""]}))},DialogCheckTemplates:e=>{const t=e.sides.filter(e=>e.unmodifiedTemplateObjects.length>0);if(t.length>0)return d()(t.map(e=>[e.area.name,e.unmodifiedTemplateObjects]))}};function Q(e){return e&&(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")),e}var Y=i(74),X=i(28),ee=i(47),te=i(239),ie=i(112),ae=i(7),se=i(4),ce=i(14),ne=i(13),re=i(96),oe=i(246),le=i(129),de=i(391),ue=i(12),be=i(564),pe=i(566),Oe=i(85),ye=i(323),je=i(11),ge=i(674),me=i(427),fe=i(127),he=i(37),ve=i(50),Se=i(25),Ae=i(52),_e=i(387),Ie=i(590),Ee=i(30),ke=i(151),Ce=i(132),Ke=i(32),De=i(97);const Pe=e=>e.bulkOrdering?e.bulkOrdering.map(t=>Object(he.d)(e,t)):[],Te=(e,t)=>{const i=ze(e,t);return Object(Oe.e)(e,i.designStateKey)},we=(e,t)=>{const i=ze(e,t),a=Object(Oe.e)(e,i.designStateKey);return Object(De.h)(i,a)},Re=(e,t)=>{const i=ze(e,t),a=Object(Oe.e)(e,i.designStateKey);return Object(De.g)(i,a)},ze=(e,t)=>Object(Se.b)(e,t),xe=(e,t)=>{const i=ze(e,t);return Object(Se.b)(e,i.breadcrumbsStateKey)},Ne=e=>{if(e.header&&e.header.discounts&&e.header.discounts.length>0){const t=e.header.discounts[0],i=e.entities.discounts[t];if(i)return i.promoCode}};function*Me(e,t,i=!1){let a=yield Object(S.k)(),s=ze(a,t);const c=Object(Oe.e)(a,t);let n=Object(De.h)(s,c);if(i||s.isCustomizing||n&&n.areas||(yield*Qe(t,!0)),"addToCart"===e&&(yield Object(S.i)(Ke.fb({hasAttemptedAddToCart:!0},t))),a=yield Object(S.k)(),s=ze(a,t),n=we(a,t),!Object(Ce.c)(a,s,n,e,void 0,i))return!1;if(i)return!0;return yield*Le(e,t)}function*Le(e,t){const i=ze(yield Object(S.k)(),t);let a=we(yield Object(S.k)(),t),s=[];if("0"!==i.rootProductId){const e={pd:i.rootProductId};let t;try{t=yield Object(S.c)(se.c,"/svc/z3/product/getProduct",Object(he.e)({productModelParams:e}),{enableCsrf:!1})}catch(l){}t&&t.success&&(s=t.data.product.templates)}a||(yield*Qe(t,!0),a=we(yield Object(S.k)(),t));const c=yield Object(S.k)(),n=Object(X.a)(c),r=function*(e){const{allowFaux:t,attributesSelectedByUser:i={},design:a,dialogSignatures:s={},finishAction:c,includeForceSelect:n,initialProductOption:r=e.product.productOption,initialTemplates:o,isCustomizing:l,loggedInMemberId:d,product:u}=e,b=[...u.doubleCheckDialogsAvailable];n&&b.push("DialogCheckForceSelect"),Object(J.c)(u)||_("DialogCheckSimpletext");0===Object(W.b)({designTemplates:a.templates,loggedInMemberId:d,productRootIsTemplate:u.rootIsTemplate,productRootOwnerId:u.rootOwnerId,productTemplates:u.templates}).length&&_("DialogCheckTemplates");u.isVizLite&&u.productAnnotations&&u.productAnnotations.some(e=>{if("area"===e.type){const t=u.areaGroupsInfo[e.areaGroup];if(!t.process.isSimpleText){if(0===V()(t.unfilteredDesignAreas,()=>!0).priceAdder)return!0}}return!1})||l||u.isBlankInstance||_("DialogCheckBleed","DialogCheckSides");"addToCart"===c||"launchBulkOrdering"===c||(_("DialogCheckTemplates"),_("DialogCheckAdult"),_("DialogCheckFaux"),_("DialogCheckDesignReview")),t||_("DialogCheckFaux");const p=a.constraints.filter(e=>("bleed"===e.type||"safearea"===e.type)&&"none"!==e.level),O=a.constraints.filter(e=>"resolution"===e.type&&"none"!==e.level),y=F()(a.areas,e=>{const t=u.areaGroupsInfo[e.group],i=p.filter(t=>t.area===e.name),s=M()(x()(i,e=>e.objects)),c=O.filter(t=>t.area===e.name),n=M()(x()(c,e=>e.objects)),r=Object(U.f)(e),d=t.process.isSimpleText&&(l||u.isPublic||u.isSavedDesign)&&(m()(e.objects)||Object(B.g)(V()(e.objects,()=>!0),t.process.maxLines)),b=Object.values(e.objects).filter(e=>{if(!e.urlkey)return!1;const t=a.templates.find(t=>t.urlkey===e.urlkey);if(!t)return!1;const i=o.find(e=>e.name===t.urlkey);if("image"===e.type||"text"===e.type){const a="image"===e.type?e.imageid:e.value;if(t.ppshow&&i&&Q(i.defaultValue)===Q(a))return!0}}),y={};b.forEach(e=>{const t=e.urlkey;y[t]||(y[t]=e)});const j=Object.values(y).map(e=>e.name),g=Object(H.c)(e.name,u.realviews,"Product");let f;if(d&&u.productAnnotations){const t=u.productAnnotations.find(t=>"area"===t.type&&t.areaGroup===e.group);t&&(f=u.realviewAnnotations.find(e=>e.productAnnotationId===t.id&&e.realviewId===g.id))}return{area:e,areaGroupInfo:t,designRealview:Object(H.c)(e.name,u.realviews,"Design"),imagesWithBleedIssues:s,imagesWithResolutionIssues:n,isBlank:r,isSimpleTextAndIncomplete:d,productRealview:g,realviewAnnotation:f,unmodifiedTemplateObjects:j}}),j=R()(y,e=>e.area.group),g=F()(j,e=>{const t=e.find(e=>!Object(U.f)(e.area));return t||e[0]});g.forEach(e=>{if(e.isBlank){const t=e.areaGroupInfo.properties,i=(t.overlap||"").replace(/[\[\]]/g,""),a=(t.overlap_pct||"").replace(/[\[\]]/g,"");if(i&&a){const t=i.split(",").map(e=>{const t=g.find(t=>t.area.group===e);return t||void("undefined"!=typeof logToServer&&logToServer("Cannot find overlapping group "+e))}).filter(e=>!!e),s=a.split(",").map(parseFloat);t.reduce((e,t,i)=>t.isBlank?e:e+s[i],0)>=.95&&(e.isBlank=!1)}}});const f=T()(a.timestamp)?a.timestamp:(new Date).getTime(),h=Object($.e)(u.pbjOverrides),v=x()(h.attributeGroups,e=>e.attributes).filter(e=>{const t=Object(q.a)(e,r),a=i[e.name];return t&&!a}).map(e=>e.name),S={design:a,designTimestamp:f,finishAction:c,forceSelectFails:v,isCustomizing:l,pbj:Object($.e)(u.pbjOverrides),product:u,sides:g,templateParamOverrides:l?{}:Object(W.a)(u.templates)},A=D()(s);for(const m of b){const e=Z[m];if(!e){"undefined"!=typeof logToServer&&logToServer("Cannot find double check dialog "+m);continue}const t=s[m],i=e(S);void 0!==i&&(C()(t,i)||(yield{dialog:m,dialogData:S,newSignatures:A},A[m]=i))}function _(...e){E()(b,e)}}({attributesSelectedByUser:i.attributesSelectedByUser,design:a,dialogSignatures:i.doubleCheckFlow?i.doubleCheckFlow.signatures:{},finishAction:e,includeForceSelect:n("Boolean","www","PDP.DoubleCheckForceSelect",!1)&&"launchBulkOrdering"!==e&&"postForSale"!==e,initialTemplates:s,isCustomizing:i.isCustomizing,loggedInMemberId:c.User.lastLoginMemberId,product:i});for(;;){const e=r.next();if(e.done)return yield*o(),!0;{yield Object(S.i)(Ke.fb({doubleCheckFlow:{dialog:e.value.dialog,dialogData:e.value.dialogData,signatures:e.value.newSignatures}},t));const{approve:i}=yield Object(S.j)({approve:Object(S.m)(e=>e.type===Ke.f&&e._stateKey===t),cancel:Object(S.m)(e=>e.type===Ke.g&&e._stateKey===t)});if(i)continue;return yield*o(),!1}}function*o(){yield Object(S.i)(Ke.fb({doubleCheckFlow:{dialog:null}},t))}}function*Fe(e){const{finishAction:t,onOkay:i,_stateKey:a}=e;(yield*Le(t,a))&&i()}function*Ge(e,t){const i=ze(yield Object(S.k)(),t);if(i){let a=i.id,s=i.productOption;const c=i.isCustomizing?{}:Object(W.a)(i.templates),n=Re(yield Object(S.k)(),t);if(i.isCustomizing){const c=ue.Pb(i.designStateKey,e,i.isBulkOrderProduct);yield Object(S.i)(c),yield Object(Ae.c)(c),a=void 0,s=ze(yield Object(S.k)(),t).productOption}else if(!m()(c)){const e={dz:n,pd:i.id,po:i.productOption,preferredViewId:i.preferredRealviewId,pt:i.productType,ta:Object(ne.i)(c),tl:i.title};i.useDPLTransferMode&&(e.transferMode="featurizedlite");const t=yield Object(S.c)(se.c,"/svc/rooter/design/productize",e);a=t.data.productId,s=ne.a.toString(t.data.productOption)}return{productId:a,productOption:s}}}function*Ve(e){const{_stateKey:t}=e;{const e=we(yield Object(S.k)(),t);e&&"waiting"===e.serverState&&(yield Object(S.m)(ue.r))}const i=ze(yield Object(S.k)(),t);if(yield Object(S.i)(Ke.fb({isAddingToCart:!0},e._stateKey)),i.isVizLite&&i.isPublic&&!i.isCustomizing&&Object(J.c)(i)){const t=Ke.J(e._stateKey);yield Object(S.i)(t),yield Object(Ae.c)(t)}if(!e.skipDoubleCheck){if(!(yield*Me("addToCart",t)))return void(yield Object(S.i)(Ke.fb({isAddingToCart:!1},e._stateKey)))}const a=xe(yield Object(S.k)(),t),c=a&&a.links.map(e=>e.title).join("/")||"UNKNOWN",n=Object(s.a)(Object(s.a)({},i),{},{bypassBloomreachTracking:i.isPrivate&&i.rootProductId===i.id,category:c}),r=Object(le.d)(yield Object(S.k)(),Object(le.l)(e._stateKey));if(r){const e=Object(Oe.e)(yield Object(S.k)(),i.designStateKey),t=Object(pe.d)(e,!1,!1);t.setParams({clone:!0}),t.finish();const a=yield Object(S.c)([t,t.callServer]);if(Object(_.b)(a))return;n.designId=a.id,n.id=void 0,n.productOption=Object(v.stringify)(Object(he.a)(a.attributes))}else{const{productId:e,productOption:i}=yield*Ge("addToCart",t),a=Re(yield Object(S.k)(),t);n.designId=a,n.id=e,n.productOption=i}const o=Object(he.d)(yield Object(S.k)(),e._stateKey).doubleCheckDialogsSeen;o&&o.length>0&&Object(Ee.h)(ke.a.DoubleCheckUsage(o,!0));Object(X.a)(yield Object(S.k)());if(!e.forceNonAjax&&!Object(ae.a)().isDisneyIframe&&!0){const t={};i.useDPLTransferMode&&(t.additionalRlvParams={transferMode:"featurizedlite"});const a=yield*Object(oe.a)(re.e([n],e.onAddToCart,t));if(yield Object(S.i)(Ke.fb({hasAttemptedAddToCart:!1,isAddingToCart:!1},e._stateKey)),i.isCustomizing&&a&&a.success&&!r){const e=a.data.itemsAddedToCart[0];e&&(yield Object(S.i)(Ke.E.switchProductId(i.stateKey,{includeTemplates:!1,productId:e.productId})))}else yield Object(S.i)(Ke.E.doubleCheckDialogReset(e._stateKey))}else{const e={};var l;if(i.useDPLTransferMode&&(e.transferMode="featurizedlite"),i.liveCheckoutParams)e.liveDesign=i.liveCheckoutParams.design,e.liveImages=null===(l=i.liveCheckoutParams.images)||void 0===l?void 0:l.join(","),e.liveMessage=i.liveCheckoutParams.message,e.liveOrigin=i.liveCheckoutParams.origin,e.productUrl=window.location.href;let t;Object(ae.a)().isDisneyIframe&&(t=Object(ne.c)("api/pn/disneyshopping/postback_product2",Object(ae.a)().sessionParams),e.pburl=Object(ne.p)(document.location.toString())[ce.a.PostbackUrl]),yield*Object(oe.b)(re.d(n,e,t))}}function*Be(e){const t=yield Object(S.k)();if(!ze(t,e._stateKey).isCustomizing)throw new Error("Can only submit revision when customizing");(yield*Me("postForSale",e._stateKey))&&(yield Object(S.i)(Ke.fb({submitRevisionFlow:{showDialog:!0}},e._stateKey)))}function*Ue(e){yield Object(S.i)(Ke.fb({submitRevisionFlow:{showDialog:!1}},e._stateKey))}function*qe(e){const t=yield Object(S.k)(),i=ze(t,e._stateKey),a=Object(Oe.e)(yield Object(S.k)(),i.designStateKey).design.id;yield Object(S.i)(Ke.fb({submitRevisionFlow:{isSubmitting:!0}},e._stateKey)),yield Object(S.i)(ue.ec(i.designStateKey));const s={designId:a,rootProductId:i.rootProductId};let c;try{c=yield Object(S.c)(se.e,"/svc/z3/product/submitRevisedDesign",s)}catch(n){console.error(n)}yield Object(S.i)(Ke.fb({submitRevisionFlow:{isSubmitting:!1,isComplete:c.success}},e._stateKey))}function*$e(e){const t=yield Object(S.k)(),i=ze(t,e._stateKey),a=Object(Oe.e)(yield Object(S.k)(),i.designStateKey),s=a.design;let c=s.id;if(!i.isCustomizing)throw new Error("Can only post for sale when customizing");if(!(yield*Me("postForSale",e._stateKey)))return;yield Object(S.i)(ue.ec(i.designStateKey));if(Object(le.d)(yield Object(S.k)(),Object(le.l)(e._stateKey))){const e=Object(pe.d)(a,!1,!1);e.setParams({clone:!0}),e.save();const t=yield Object(S.c)([e,e.callServer]);if(Object(_.b)(t))return;c=t.id}const n=Object(ne.p)(document.location.toString()),r={cg:n.cg,cmid:n.cmid,dz:c,fm:n.fm,gl:n.gl,ifr:n.ifr,intdp:i.departmentId===n[ce.a.IntentDepartmentId]?i.departmentId:void 0,istmp:!m()(s.templates),pt:i.productType,rcmid:n.rcmid,tag:n.tag,tool:"z3",view:i.preferredRealviewId};"0"!==t.User.memberId&&i.rootOwnerId===t.User.memberId&&(r.rpd=i.rootProductId),i.hasUserTitle&&(r.tl=i.title),window.location.href=Object(ne.c)("/pub/product",r)}function*Je(e){const t=ze(yield Object(S.k)(),e._stateKey),i=Pe(yield Object(S.k)());for(const s of i){if(!(yield*Me("addToCart",s.stateKey,!0)))return}const{productId:a,productOption:c}=yield*Ge("addToCart",t.stateKey),n=ne.a.fromString(c)["design.areas"],r=Re(yield Object(S.k)(),t.stateKey),o=yield Object(S.k)(),l=xe(o,t.stateKey),d=l&&l.links.map(e=>e.title).join("/")||"UNKNOWN",u=i.map(e=>{const t=ne.a.fromString(e.productOption);t["design.areas"]=n;return Object(s.a)(Object(s.a)({},e),{},{category:d,designId:r,id:a,productOption:ne.a.toString(t)})}),b={};t.useDPLTransferMode&&(b.additionalRlvParams={transferMode:"featurizedlite"}),yield Object(S.i)(Object(fe.c)(e.loadingOverlayStateKey));const p=yield*Object(oe.a)(re.e(u,null,b));yield Object(S.i)(Object(fe.b)(e.loadingOverlayStateKey)),p.success?location.href=Object(ne.c)("/co/cart",{multiSku:!0,pd:a,scAdd:!0}):Object(te.b)(new Error(p.error))}function*He(e){const{_stateKey:t}=e;(yield*Le("launchBulkOrdering",t))&&(yield Object(S.i)(Ke.fb({isInBulkOrdering:!0},t)))}function*We(e){const t=ze(yield Object(S.k)(),e._stateKey),i=t.realviews.find(e=>e.id===t.preferredRealviewId);if("video"===i.media||"dynamicvideo"===i.media){const a=t.realviews.find(e=>{const t=j()(i.primaryVisibleDesignAreaNames,e.primaryVisibleDesignAreaNames),a=0===i.primaryVisibleDesignAreaNames.length;return"image"===e.media&&(a||t.length>0)});yield Object(S.i)(Ke.fb({preferredRealviewId:a.id},e._stateKey))}yield Object(S.i)(Ke.fb({hasEnteredDesignSpace:!0,isInDesignSpace:!0},e._stateKey)),Object(Ee.h)(ke.a.EnterDesignSpace()),Object(ye.o)("EnteredDesignTool");const a=Ke.J(e._stateKey,e.area);yield Object(S.c)(Ze,a)}function*Ze(e){var t,i;const a=ze(yield Object(S.k)(),e._stateKey),s=(yield Object(S.k)()).User.memberId;let c=Te(yield Object(S.k)(),e._stateKey);if(!a.isCustomizing||(null===(t=c)||void 0===t||null===(i=t.settings)||void 0===i?void 0:i.isFinished)){var n;if(a._hasStartedCustomizing)return;if(yield Object(S.i)(Ke.fb({_hasStartedCustomizing:!0},e._stateKey)),yield Object(S.c)(Qe,e._stateKey,!1,e.area,e.initialDesignSettings),c=Te(yield Object(S.k)(),e._stateKey),!(null===(n=c)||void 0===n?void 0:n.design))return;yield Object(S.i)(Ke.fb({_hasStartedCustomizing:!1,isCustomizing:!0},e._stateKey));const t=dt(yield Object(S.k)(),e._stateKey);e.productOptionOverrides&&(t.productModelParams.poOverride=ne.a.toString(e.productOptionOverrides));a.realviews.find(e=>e.id===a.preferredRealviewId).isUGC&&(t.productModelParams.preferredViewId=a.preferredRealviewNonUGCId),yield*Xe(t,e._stateKey,!0),yield Object(S.i)(Object(Ae.b)(e.uid));const i=Object(he.d)(yield Object(S.k)(),a.stateKey);yield Object(S.i)(ue.yc(i.designStateKey,a.title,!1)),"0"!==s&&(yield Object(S.g)(se.e,"/svc/z3/product/logCustomizeProduct"))}else{const t=e.area?ue.Ac(a.designStateKey,null,e.area,"Design"):ue.Ac(a.designStateKey,a.preferredRealviewId,null,"Design");yield Object(S.i)(t),yield Object(Ae.c)(t),yield Object(S.i)(Object(Ae.b)(e.uid))}}function*Qe(e,t,i,a){const c=ze(yield Object(S.k)(),e),n=t?null:c.preferredRealviewId,r=Object(ne.o)(c.productOption),o=Object(W.a)(c.templates),l=c.useDPLTransferMode?"featurizedlite":void 0,d=e+"_design";yield Object(S.i)(Object(ve.c)(d,be.a));const u=c.transferTemplateParams||{},b=ue.Vb(d,c.designId,n,e,c.productType,c.transferEnabled?c.productOptionsFromUrl:r,t,Object(s.a)(Object(s.a)({},o),u),c.transferDesignId,l,i,void 0,a);yield Object(S.i)(b),yield Object(Ae.c)(b),yield Object(S.i)(Ke.fb({designStateKey:d},e))}function*Ye(e){const t=ze(yield Object(S.k)(),e._stateKey);yield Object(S.i)(Ke.fb({isInDesignSpace:!1},e._stateKey)),yield Object(S.i)(ue.Kc(t.designStateKey,{designPreviewSelectedIndex:void 0}))}function*Xe(e,t,i=!1,a=!1){let s,c=Object(he.d)(yield Object(S.k)(),t);if(!c.isBulkOrderProduct&&c.isCustomizing&&!i)return yield Object(S.i)(Ke.fb({initialPrettyPreferredViewId:null,initialPrettyPreferredViewUrl:null},c.stateKey)),void(yield Object(S.i)(ue.vb.changeOptions(c.designStateKey,ne.a.fromString(e.productModelParams.poOverride))));try{s=yield Object(S.c)(se.c,"/svc/z3/product/changeOptions",Object(he.e)(e),{enableCsrf:!1})}catch(n){}if(s&&s.success){c=ze(yield Object(S.k)(),t);let i=s.data.product;const n=i.quantity;delete i.quantity,i=Object(he.f)(c,i,Object(ne.o)(e.productModelParams.poOverride)),i.initialPrettyPreferredViewId=null,i.initialPrettyPreferredViewUrl=null;const r=[Object(je.c)(s.data.entities),Ke.fb(i,t)];if(yield Object(S.i)(Object(Y.a)(r)),i=ze(yield Object(S.k)(),t),i.isBulkOrderProduct){if(yield Object(S.i)(Ke.O(i.stateKey)),i.isCustomizing){const e=Object(Oe.e)(yield Object(S.k)(),i.designStateKey).transferMode,t=we(yield Object(S.k)(),i.stateKey);yield Object(S.i)(ue.Vb(i.designStateKey,t.id,void 0,i.stateKey,i.productType,ne.a.fromString(i.productOption),!0,void 0,i.transferDesignId,e,t.activeArea))}}else i.isCustomizing||i.isVizLite&&!Object(J.b)(i)||a||(yield*Qe(t,!0)),a||(yield Object(S.i)(Ke.O(t,n)),yield Object(S.i)(Object(_e.d)(t,void 0,n)))}}function*et(e,t,i=!1){ze(yield Object(S.k)(),t).isVizLite?yield Object(S.c)(Xe,e,t):yield Object(S.b)([Object(S.c)(ct,e,t),Object(S.c)(Xe,e,t,!1,i)])}function*tt(e){const t=Pe(yield Object(S.k)()),i=ze(yield Object(S.k)(),e._stateKey),a=i.isBulkOrderProduct?t:[i],s=i.isBulkOrderProduct?O()(t.map(e=>e.quantity)):e.quantity||i.quantity;for(const n of a){if(n.preventPricingCall)return;const t=ne.a.fromString(n.productOption);if("design.areas"in t){const e=we(yield Object(S.k)(),n.stateKey);if(e){const i=Object(A.d)(e);t["design.areas"]=i.length>0?`[${i.join(",")}]`:""}}else t["design.areas"]="";const i={dz:Re(yield Object(S.k)(),n.stateKey),mu:n.transferPriceMarkup||n.priceMarkup,pd:n.id,pmCode:Object(ae.a)().botSoftPromoCode||Ne(yield Object(S.k)()),po:ne.a.toString(t),pt:n.productType,qty:s};let a;try{a=yield Object(S.c)(se.c,"/svc/z3/product/pricing",i,{includeCacheVersion:!1})}catch(c){}if(a&&a.success){const t={pricing:a.data};e.quantity&&(t.quantity=e.quantity),yield Object(S.i)(Ke.fb(t,n.stateKey))}}}function*it(e){yield Object(S.i)(Ke.bb(e.attributeValues,e._stateKey)),e.byUser&&(yield Object(S.i)(Ke.fb({attributesSelectedByUser:b()(e.attributeValues,()=>!0)},e._stateKey)));const t=yield Object(S.k)(),i=Object(he.d)(t,e._stateKey),a=Object(De.h)(i,Object(Oe.e)(t,i.designStateKey));if(i.isCustomizing&&!i.isBulkOrderProduct){const t=ue.vb.changeOptions(i.designStateKey,e.attributeValues,i.isBulkOrderProduct);yield Object(S.i)(t),yield Object(Ae.c)(t)}else{const t=dt(yield Object(S.k)(),e._stateKey,!1);t.productModelParams.poOverride=ne.a.toString(e.attributeValues),i.isBulkOrderProduct&&(t.productModelParams.poOverride=ne.a.toString(Object(s.a)(Object(s.a)({},b()(i.attributes,e=>e.value)),e.attributeValues)));i.realviews.find(e=>e.id===i.preferredRealviewId).isUGC&&(t.productModelParams.preferredViewId=i.preferredRealviewNonUGCId),yield Object(S.c)(et,t,e._stateKey)}if(e.byUser){const t=yield Object(S.k)(),s=Object(he.d)(t,e._stateKey),c=Object(De.h)(s,Object(Oe.e)(t,s.designStateKey)),{activeAreaGroupInfo:n,activeDesignAreaInfo:r}=Object(De.e)(s,c);if(null==r?void 0:r.isResizable){const t=n.process.name,s=!Object(A.h)(c),r=Object(De.e)(i,a).activeAreaGroupInfo.process.name;s&&"contoursticker"===t&&"contoursticker"!==r&&(yield Object(S.i)(ue.vb.promptFocusArea(e._stateKey,!0)))}}}function*at(e){yield Object(S.i)(Ke.fb({preferredRealviewId:e.realviewId},e._stateKey));const t=dt(yield Object(S.k)(),e._stateKey,!1);t.productModelParams.preferredViewId=e.realviewId,t.productModelParams.poOverride=t.productModelParams.po,yield Object(S.c)(et,t,e._stateKey,!0)}function*st(e){ze(yield Object(S.k)(),e._stateKey).isBulkOrderProduct?(yield Object(S.i)(Ke.fb({quantity:e.quantity},e._stateKey)),yield Object(S.i)(Ke.O(e._stateKey))):yield Object(S.i)(Ke.O(e._stateKey,e.quantity))}function*ct(e,t){let i;try{i=yield Object(S.c)(se.c,"/svc/z3/product/changeOptionsRealviews",Object(he.e)(e),{enableCsrf:!1})}catch(a){return}if(i&&i.success){const e=i.data.product;yield Object(S.i)(Ke.fb(e,t))}}function*nt(e){const t=ze(yield Object(S.k)(),e._stateKey);let i;const a={att:e.attributeName,dialogType:e.dialogType,po:t.productOption,pt:t.productType};try{i=yield Object(S.c)(se.c,"/svc/z3/product/productattributehelp/gethelpdialog",a)}catch(s){}i&&i.success&&i.data?yield Object(S.i)(Ke.ab(e.attributeName,t.productOption,i.data,e._stateKey)):e.onRequestFail&&e.onRequestFail()}function*rt(e){var t,i;const s=e.getProductParams,{quantityOverride:c,tlOverride:n}=s,r=Object(a.a)(s,["quantityOverride","tlOverride"]);let o;e.loadingOverlayKey&&(yield Object(S.i)(Object(fe.c)(e.loadingOverlayKey)));try{o=yield Object(S.c)(se.c,"/svc/z3/product/getProduct",Object(he.e)({productModelParams:r,quantityOverride:c,stateKey:e._stateKey,tlOverride:n}),{enableCsrf:!1})}catch(d){var l;null===(l=e.callback)||void 0===l||l.call(e,!1)}if(o&&o.success){const t=o.data.product,i=[Object(je.c)(o.data.entities),Ke.fb(t,e._stateKey)];yield Object(S.i)(Object(Y.a)(i)),e.initialize&&(yield Object(S.i)(Ke.U(e._stateKey)))}e.loadingOverlayKey&&(yield Object(S.i)(Object(fe.b)(e.loadingOverlayKey))),null===(t=e.callback)||void 0===t||t.call(e,!!(null===(i=o)||void 0===i?void 0:i.success))}function*ot(e){const t=ze(yield Object(S.k)(),e._stateKey);if(!t||"0"===t.id||Object(J.d)(t)||t.isVizLite)return;let i;try{i=yield Object(S.c)(se.c,"/svc/z3/product/getRecentDesignsByProductId",{pd:t.id})}catch(a){}i&&i.success&&(yield Object(S.i)(Ke.fb({recentDesigns:i.data.designs},e._stateKey)))}function*lt(e){const t=yield Object(S.k)(),i=ze(t,e._stateKey),a=Object(Se.b)(yield Object(S.k)(),i.designStateKey),c=(()=>{var s;if(!e.includeTemplates)return;const c=Object(Ie.a)()(t,e._stateKey),n=(null==a||null===(s=a.design)||void 0===s?void 0:s.editlevel)&&"none"!==a.design.editlevel,r=!n&&!m()(Object(W.a)(i.templates));return ne.a.toString(d()(c.filter(e=>!(!n&&!r)||"txt"===e.type).map(e=>[`t_${e.name}_${e.type}`,encodeURIComponent(e.value)])))})();let n=[];const r=(()=>{var t;let a=null!==(t=e.productOption)&&void 0!==t?t:i.productOption;if(e.excludeColorAttributes){n=Object.keys(i.attributes).filter(e=>{var t;return[e,i.attributes[e].title.toLowerCase()].some(e=>e.includes("color"))&&!(null===(t=i.attributesSelectedByUser)||void 0===t?void 0:t[e])});const e=d()(n.map(e=>[e,void 0])),t=Object(s.a)(Object(s.a)({},ne.a.fromString(a)),e);a=ne.a.toString(t)}return a})(),o={pd:e.productId,poOverride:r,preferredViewId:i.preferredRealviewId,ta:c},l=Object(he.e)({productModelParams:o,quantityOverride:i.quantity,stateKey:i.stateKey});let u;try{u=yield Object(S.c)(se.c,"/svc/z3/product/getProduct",l)}catch(p){}if(u&&u.success){var b;const t=Object(s.a)(Object(s.a)({attributesSelectedByUser:{}},u.data.product),e.productStateToPersist);Object.keys(null!==(b=i.attributesSelectedByUser)&&void 0!==b?b:{}).forEach(e=>{t.attributesSelectedByUser[e]=!0});const a=[Object(je.c)(u.data.entities),Ke.fb(t,t.stateKey,!0)];a.push(Object(ve.d)(i.designStateKey)),yield Object(S.i)(Object(Y.a)(a));const c=Ke.U(t.stateKey,{customize:e.startCustomizing});yield Object(S.i)(c),yield Object(Ae.c)(c)}yield Object(S.i)(Object(Ae.b)(e.uid))}function dt(e,t,i=!1){const a=ze(e,t),s=we(e,t),c=Re(e,t);let n=a.productOption;if(a.isCustomizing&&!a.isBulkOrderProduct&&s&&s.attributes){const e=Object(he.a)(s.attributes);i&&(e["design.areas"]=""),n=ne.a.toString(e)}const r={isCustomizing:!!a.isCustomizing,productModelParams:{accd:a.accessoryId,departmentIdOverride:a.departmentIdOverride,dz:c,of:a.optionFilterId,pd:a.isCustomizing?void 0:a.id,po:n,ppd:a.parentProductId,ppo:a.parentProductOption,preferredViewId:a.preferredRealviewId,pt:a.productType,ta:bt(a)}};return a.isBulkOrderProduct||(r.qty=a.quantity),r}function ut(e,t,i=!1){const a=ne.a.fromString(e.productOption);if(t)for(const[c,n]of Object.entries(t))void 0===n&&(delete t[c],delete a[c]);i&&(a["design.areas"]="");const s={isCustomizing:!!e.isCustomizing,productModelParams:{accd:e.accessoryId,departmentIdOverride:e.departmentIdOverride,dz:e.designId,of:e.optionFilterId,pd:e.isCustomizing?void 0:e.id,po:Object(v.stringify)(a),poOverride:Object(v.stringify)(t),ppd:e.parentProductId,ppo:e.parentProductOption,preferredViewId:e.preferredRealviewId,pt:e.productType,ta:bt(e)}};return e.isBulkOrderProduct||(s.qty=e.quantity),s}function bt(e){if(e.isCustomizing)return;const t=b()(Object(W.a)(e.templates),e=>encodeURIComponent(e));return ne.a.toString(t)}function*pt(e){const{_stateKey:t,productOptionOverrides:i}=e;let a=ze(yield Object(S.k)(),t);a=h()(a,{initialProductOption:{$set:a.productOption}}),a.attributesSelectedByUser||(a=Object(he.f)(a,a,{})),yield Object(S.i)(Ke.fb(a,t,!0));if(a.designId===ie.a.Empty||a.isBlankInstance||a.isSavedDesign||e.customize){const a=Ke.J(t,null,i,e.initialDesignSettings);yield Object(S.i)(a),yield Object(Ae.c)(a);const s=yield Object(S.k)(),c=ze(s,t),n=Object(X.a)(s);!c.isVizLite&&c.isSavedDesign&&n("Boolean","ZExp","DPLTransferMode",!1)&&(yield Object(S.i)(ue.fc(c.designStateKey))),e.collabId&&(yield Object(S.i)(de.b.initializeExisting({collabId:e.collabId,productStateKey:t})))}else{if(e.productOptionOverrides){const e=Ke.Y(i,t);yield*it(e)}else{yield Object(S.i)(Ke.O(t)),yield Object(S.i)(Object(_e.d)(t));o()(a.attributes,e=>e.values.length!==e.nominalValueCount)&&(yield Object(S.c)(Ot,t))}a.isVizLite&&(yield Object(S.c)(Qe,t,!0))}if(a.isVizLite){const e=we(yield Object(S.k)(),t),i={};n()(a.areaGroupsInfo,t=>{if(t.process.isSimpleText){const a=Object.keys(t.unfilteredDesignAreas)[0],s=e.areas[a];if(s&&s.childnames.length){const e=s.objects[s.childnames[0]];i[t.name]=e.value}}});const s={dirty:!1,placeholders:a.isPrivate?{}:i,tentativeValues:a.isPrivate?i:{}};yield Object(S.i)(Ke.fb({simpleText:s},a.stateKey))}yield Object(S.i)(Object(Ae.b)(e.uid))}function*Ot(e,t){const i=dt(yield Object(S.k)(),e);let a;t&&(i.productModelParams.poOverride=Object(v.stringify)(t));try{a=yield Object(S.c)(se.c,"/svc/z3/product/changeOptions",Object(he.e)(i),{enableCsrf:!1})}catch(s){}if(a&&a.success){const t=a.data.product,i=[Object(je.c)(a.data.entities),Ke.fb(t,e)];yield Object(S.i)(Object(Y.a)(i))}}function*yt(e){const t=yield Object(S.k)(),i=we(t,e._stateKey);let a=ze(t,e._stateKey);if(a.simpleText.dirty){if(!a.isCustomizing){const t=Ke.J(e._stateKey);yield Object(S.i)(t),yield Object(Ae.c)(t)}const t=new Set;n()(a.areaGroupsInfo,e=>{e.process.isSimpleText&&t.add(e.name)});const c={};n()(i.areas,e=>{t.has(e.group)&&(c[e.name]=a.simpleText.tentativeValues[e.group])}),a=ze(yield Object(S.k)(),e._stateKey);const r=Object(s.a)(Object(s.a)({},a.simpleText),{},{dirty:!1});yield Object(S.i)(Ke.fb({simpleText:r},e._stateKey));const o=ue.tc(a.designStateKey,c);yield Object(S.i)(o),yield Object(Ae.c)(o)}}function*jt(e){try{const t=yield Object(S.k)(),i=Object(X.a)(t),a=ze(t,e._stateKey),c=a.templates.map(W.d).reduce((e,t)=>Object(s.a)(Object(s.a)({},e),{},{[t.name]:t.value}),{}),n=ne.a.toString(b()(c,encodeURIComponent)),r=i("Int32","www","MaxTemplatesLength",0);if(n&&r&&n.length>r)return;const o=yield Object(S.c)(se.c,"/svc/z3/product/getgroupedproductinfo",{id:a.id});o.success&&(yield Object(S.i)(Ke.fb({groupedProducts:o.data},e._stateKey)))}catch(t){}}function*gt(e){const t=e._stateKey,i=dt(yield Object(S.k)(),t);let a;i.productModelParams.of=e.optionFilterId;try{a=yield Object(S.c)(se.c,"/svc/z3/product/changeOptions",Object(he.e)(i),{enableCsrf:!1})}catch(s){}if(a&&a.success){const e=a.data.product,i=[Object(je.c)(a.data.entities),Ke.fb(e,t)];yield Object(S.i)(Object(Y.a)(i))}}function*mt(e){const t=Ke.E.switchProductId(e._stateKey,{includeTemplates:!1,productId:e.rootProductId,productOption:e.productOption,productStateToPersist:{showFreeSampleDialog:!0},startCustomizing:!0});yield Object(S.i)(t),yield Object(Ae.c)(t);const i=yield Object(S.k)(),a=ze(i,e._stateKey),s=ue.vb.designTransfer(a.designStateKey,{attributes:ne.a.fromString(a.productOption),productType:"zazzle_papersample",transferMode:"default"});yield Object(S.i)(s),yield Object(Ae.c)(s),yield Object(S.i)(Ke.F(e._stateKey,void 0,!0,!0))}function*ft(){yield Object(S.b)([Object(S.n)(Ke.k,nt),Object(S.n)(Ke.m,jt),Object(S.n)(Ke.n,rt),Object(S.n)(Ke.o,ot),Object(S.n)(Ke.p,pt),Object(S.o)(Ke.D.BUY_SAMPLE,mt),Object(S.o)(Ke.D.SWITCH_PD,lt),Object(S.o)(Ke.a,Ve),Object(S.o)(Ke.b,Je),Object(S.o)(Ke.i,Ye),Object(S.o)(Ke.j,tt),Object(S.o)(Ke.q,He),Object(S.o)(Ke.s,$e),Object(S.o)(Ke.t,it),Object(S.o)(Ke.u,at),Object(S.o)(Ke.r,Be),Object(S.o)(Ke.c,Ue),Object(S.o)(Ke.x,gt),Object(S.o)(Ke.z,qe),Object(S.o)(Ke.B,st),Object(S.o)(Ke.C,Fe),Object(S.p)(Ke.e,Ze),Object(S.p)(Ke.h,We),Object(ee.a)(Ke.d,yt),Object(S.g)(ge.a),Object(S.g)(pe.b),Object(S.g)(me.a)])}},564:function(e,t,i){"use strict";(function(e){i.d(t,"b",(function(){return k})),i.d(t,"a",(function(){return D}));var a=i(2),s=i(150),c=i.n(s),n=i(72),r=i.n(n),o=i(109),l=i.n(o),d=i(182),u=i.n(d),b=i(24),p=i.n(b),O=i(40),y=i(302),j=i(21),g=i(12);const m={},f={areaFillColorsMap:{},fontColorsMap:{},fontsMap:{},recentFonts:[]},h={loading:null,page:{entityIds:[],numResults:0,pageNum:0,pageSize:30},query:""},v={activeContentTab:"layers",chatWindowStatus:"minimized",isContentPanelExpanded:!0,toasts:[]};function S(e=m,t){const i=t;return Object(y.d)(e,i.object,i.overrideAreas)}function A(e=m,t){const i=t;return Object(y.e)(e,i.object,i.mergeArrays)}function _(e,t){return function(i=m,a){return a.type!==e?i:t(i,a)}}const I=Object(j.i)(Object(j.e)(g.M,null),_(g.gb,S),_(g.fb,A),_(g.L,(function(e=m,t){const i=e.areas[e.activeArea].childnames;return p()(e,{selection:{$set:i}})})),(function(e,t){if(t.type===g.ab){const i=t,a=i.names||e.selection,s={areas:{[e.activeArea]:{objects:c()(a.map(e=>[e,{styles:{0:{$merge:Object(y.c)(i.props)}}}]))}}};return p()(e,s)}if(t.type===g.T){const i=t,a=i.names||e.selection,s={areas:{[e.activeArea]:{objects:c()(a.map(e=>[e,{fill:{$merge:Object(y.b)(i.props)}}]))}}};return p()(e,s)}if(t.type===g.O){const i=t,a=Object(y.b)(i.fill),s=!!e.areas[e.activeArea].fill,c={areas:{[e.activeArea]:{fill:s?{$merge:a}:{$set:a}}}};return p()(e,c)}return e})),E=Object(j.d)(g.pb,void 0);const k=Object(j.h)(g.nb,{}),C=Object(j.i)(Object(j.e)(g.rb,null),_(g.tb,S),_(g.sb,A)),K=Object(O.c)({clientVersion:Object(j.c)("z4qrcode"),design:I,error:Object(j.e)(g.n,null),formatsTabData:Object(j.e)(g.qb,null),imageBrowser:function(e=h,t){switch(t.type){case g.xb.IMAGE_BROWSER_RECEIVE_PAGE:return{loading:null,page:{entityIds:t.page.pageNum>1?[...e.page.entityIds,...t.page.entityIds]:t.page.entityIds,numResults:t.page.numResults,pageNum:t.page.pageNum,pageSize:t.page.pageSize},query:t.query};case g.xb.IMAGE_BROWSER_SET_LOADING:return Object(a.a)(Object(a.a)({},e),{},{loading:t.loading});default:return e}},inFlightImageCount:function(e=0,t){return t.type===g.xb.RENDER_OBJECT_IMAGE_COMPLETED?e-1:t.type===g.xb.RENDER_OBJECT_IMAGE_REQUESTED?e+1:e},pickerData:function(e=f,t){switch(t.type){case g.mb:const i=t;return p()(e,{$merge:i.object});case g.ub:return p()(e,{$merge:{recentFonts:t.recentFonts}});case g.b:const a=t,{swatch:s,context:c,process:n,maxNumSwatches:o}=a,d="AreaFill"===c?e.areaFillColorsMap[n].recentSwatches:e.fontColorsMap[n].recentSwatches;if(!u()(d,e=>e.hexCode===s.hexCode)){let t=l()(d);return t.unshift(s),r()(o)||(t=t.slice(0,o)),p()(e,{["AreaFill"===c?"areaFillColorsMap":"fontColorsMap"]:{[n]:{recentSwatches:{$set:t}}}})}}return e},productStateKey:Object(j.e)(g.U,null),renderDesign:k,settings:function(e=v,t){if(t.type===g.xb.ENQUEUE_TOAST){const i=t;return p()(e,{toasts:{$push:[i.toast]}})}if(t.type===g.pb){let i=t;const{object:s}=i;return s&&s.activeContentTab&&s.activeContentTab!==e.activeContentTab&&(i=Object(a.a)(Object(a.a)({},i),{},{object:Object(a.a)(Object(a.a)({},s),{},{isContentPanelExpanded:!0})})),E(e,i)}return e},stateKey:Object(j.e)(g.Y,null),transferMode:Object(j.e)(g.cb,null),transientDesign:C});function D(e,t){if(t.type===g.X){return t.state}return K(e,t)}}).call(this,i(612))},566:function(e,t,i){"use strict";i.d(t,"a",(function(){return et})),i.d(t,"d",(function(){return it})),i.d(t,"c",(function(){return pt})),i.d(t,"b",(function(){return Tt}));var a=i(2),s=i(100),c=i.n(s),n=i(182),r=i.n(n),o=i(150),l=i.n(o),d=i(416),u=i.n(d),b=i(146),p=i.n(b),O=i(24),y=i.n(O),j=i(1),g=i(209),m=i(120),f=i(159),h=i(264),v=i(181),S=i(74),A=i(28),_=i(47),I=i(7),E=i(4),k=i(14),C=i(19),K=i(129),D=i(391),P=i(11),T=i(232),w=i(32),R=i(406),z=i(97),x=i(37),N=i(15),M=i(26),L=i.n(M),F=i(197),G=i(12),V=i(302),B=i(564),U=i(85);function*q(e,t,i=!1){const a=Object(R.c)(e,t,i);let s;try{s=yield Object(j.c)(E.c,"/svc/z3/product/changeOptions",Object(x.e)(a),{enableCsrf:!1})}catch(n){}if(!s||!s.success)return;const c=Object(x.f)(e,s.data.product,t);c.designStateKey=e.designStateKey,c.stateKey=e.stateKey;return{entities:s.data.entities,product:c}}function*$(e){const t=Object(x.e)({productModelParams:e});let i;try{i=yield Object(j.c)(E.c,"/svc/z3/product/getProduct",t)}catch(s){}if(!i||!i.success)return;const a=i.data.product;return{entities:i.data.entities,product:a}}function*J(e){const{driverAction:t,oldDesignState:i,oldProduct:a,overrideAreas:s,responseDesign:c,transient:n}=e,r=Object(U.b)(i,n);let o=Object(V.d)(r,c,s);Object(m.i)(o);let l=W(i,{$set:o},n),d={},u=a,b=!1;if(!n){const e=r.id!==o.id,i=r.type!==o.type;if(e||i){const e=Object(x.a)(o.attributes),t=yield Object(j.c)($,{dz:o.id,po:Object(F.stringify)(e),pt:o.type});d=t.entities,u=t.product,u.designStateKey=a.designStateKey,u.isCustomizing=a.isCustomizing,u.isInDesignSpace=a.isInDesignSpace,u.showFreeSampleDialog=a.showFreeSampleDialog,u.stateKey=a.stateKey,b=!0}else{const[e,t]=[r,o].map(e=>Object(x.a)(e.attributes)),i=(()=>{const i={},a=[...new Set([...Object.keys(e),...Object.keys(t)])];for(const s of a)s in t?s in e&&e[s]===t[s]||(i[s]=t[s]):i[s]=void 0;return i})();if(!L()(i)){const a="design.areas"in e&&!("design.areas"in t),s=yield Object(j.c)(q,u,i,a);d=s.entities,u=s.product,b=!0}}if(t&&!n){const e=pt(t,o);if(e){const t=G.Ic(u.designStateKey,e),i=Object(B.b)(l.renderDesign,t);l=y()(l,{renderDesign:{$set:i}}),o=Object(U.b)(l,n)}}!b||u.isVizLite||n||(l=yield Object(j.c)(H,l,u.realviews,!1,void 0,o.activeArea),o=l.design)}l=Z(l,Object(U.e)(yield Object(j.k)(),l.stateKey),n);return{designState:l,entities:d,product:u}}function*H(e,t,i,a,s,c="Design"){const n=Object(U.b)(e,i),r=Object(v.a)(t,c,a,s,n);let o=e;const l=n.views[r.realviewId];if(!l||!l.hasGrids){const t=it(e,i,Object(x.c)(yield Object(j.k)()));t.setParams({glyphs:!1,returnallareas:!1,returnareapaths:!0,returngrids:!0,readonly:i,view:r.realviewId});const a=yield Object(j.c)([t,t.callServer]);if(Object(h.b)(a))return y()(o,{error:{$set:a}});Object.values(a.views).forEach(e=>e.hasGrids=!0);o=W(o,{$set:Object(V.d)(o.design,a,i)},i)}o=W(o,{$merge:{activeArea:r.designAreaName,activeView:r.realviewId}},i);const d=Object(U.b)(o,i),u=d.areas[d.activeArea],b=Object(f.e)(u,u.childnames).filter(e=>!e.locked);if(b.length>0){o=W(o,{$set:Object(V.e)(d,{selection:[b[b.length-1].name]},!1)},i),o=y()(o,{settings:{$merge:{metaSelection:void 0}}})}else o=W(o,{selection:{$set:[]}},i);return o=Z(o,Object(U.e)(yield Object(j.k)(),o.stateKey),i),o}function W(e,t,i){return i?y()(e,{transientDesign:t}):y()(e,{design:t})}function Z(e,t,i){var a;const s=t.settings,{metaSelection:c}=s,n=Object(N.a)(s,["metaSelection"]);e=y()(e,{settings:{$merge:n}});const r=null===(a=Object(U.b)(t,i))||void 0===a?void 0:a.max_dim;return void 0!==r&&(e=W(e,{$merge:{max_dim:r}},i)),e}var Q=i(25),Y=i(52),X=i(387),ee=i(30),te=i(151);class ie extends V.a{static create(e){const t=e;return new ie("full",t.params,t.actions,t.endpoint,t.version)}constructor(e,t={},i=[],a="/rlv/svc/edit",s=1){super(e,t,i,a,s)}callServerRaw(){return Object(E.e)(this.endpoint,this.toString(),{enableCsrf:!1,headers:{"Content-Type":"text/xml"},includeClientParam:!1})}}var ae=i(395);const se=(e,t,i)=>{const a=e.design,s=e.settings;!i.resizeAreaToImage&&a.activeArea&&t.area(a.activeArea);let c=5;void 0!==s.vectorImageMaxColors&&(c=s.vectorImageMaxColors),i.imageids.forEach(e=>{t.image({imageid:e,maxcolors:c})}),i.resizeAreaToImage&&t.setParams({image_orient:!0,image_orient_custom:!i.standardSize,returnareapaths:!0})},ce=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),t.layer("Bg"),i.clearBg&&(t.selectAll(),t.delete()),i.imageids.forEach(e=>{t.image({imageid:e}),t.layout({layoutparams:"fillto=bleed",type:"fill"})})},ne=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),i.imageids.forEach(e=>{t.path({imageid:e})})},re=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),i.values.forEach(e=>{t.qrcode({value:e})})},oe=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),t.path({shape:i.shape})},le=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),t.sourceProduct(i.productId,i.group)},de=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),t.layer("Bg"),t.sourceProduct(i.productId,i.group)},ue=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=a.activeFont?a.activeFont:i.mostRecentFont?{face:i.mostRecentFont}:null;s&&t.font(s),i.values.forEach(e=>{t.text({value:e})})},be=(e,t,i)=>{const a=e.design;t.chgarea(i.fromAreaName||a.activeArea,i.toAreaName)},pe=(e,t,i)=>{t.setParams(Object(a.a)({},i.poOverrides)),t.setParams({returnallareas:!0}),t.setParams({valopt:!0})},Oe=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.copy()},ye=(e,t,i)=>{t.select(i.names.join());const{crop:a}=i;t.set({crop:`[${a.left}, ${a.top}, ${a.right}, ${a.bottom}]`})},je=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.cut()},ge=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.delete()},me=(e,t)=>{const i=e.design;i.activeArea&&t.area(i.activeArea),t.layer("Bg"),t.selectAll(),t.delete()},fe=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.copy(),t.paste()},he=(e,t,i)=>{i.clone&&t.setParam("clone",i.clone),t.finish("postForSale"===i.finishAction)},ve=(e,t,i)=>{t.setParam("returnareapaths",!0);const a=e.design;a.activeArea&&t.area(a.activeArea),t.focusarea(i.outline,i.resize)},Se=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),t.select(...a.selection),t.flip(i.x,i.y,!0)},Ae=(e,t,i)=>{const a=e.design;t.select(...a.selection),t.group({clip:i.clip})},_e=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),i.fillmode&&t.set({fillmode:i.fillmode});for(let c=0;c<i.layoutType.length;c++)t.layout({layoutparams:i.layoutParams&&i.layoutParams[c],type:i.layoutType[c]},i.persist)},Ie=(e,t,i)=>{const a=e.design;i.names.map(e=>{Object.keys(a.areas).map(s=>{if(Object.keys(a.areas[s].objects).includes(e)){t.area(s),t.select(e),i.fillmode&&t.set({fillmode:i.fillmode});for(let e=0;e<i.layoutType.length;e++)t.layout({layoutparams:i.layoutParams&&i.layoutParams[e],type:i.layoutType[e]},i.persist)}})})},Ee=(e,t)=>{const i=e.design;i.activeArea&&t.area(i.activeArea),t.paste()},ke=(e,t)=>{t.redo()},Ce=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),t.select(...a.selection),t.reorder(i.aboveName)},Ke=(e,t,i)=>{const a=e.design,s=a.areas[a.activeArea];t.area(a.activeArea);const c=i.names||a.selection,n=[];if(s.childnames.forEach(e=>{-1!==c.indexOf(e)&&n.push(e)}),"up"===i.direction){const e=n[n.length-1],i=s.childnames.indexOf(e);i+1<s.childnames.length&&(t.select(...c),t.reorder(s.childnames[i+1]))}else{const e=n[0],i=s.childnames.indexOf(e);i-1>0?(t.select(...c),t.reorder(s.childnames[i-2])):i-1==0&&(t.select(...c),t.reorder())}},De=(e,t,i)=>{const a=e.design,s=a.areas[a.activeArea].childnames,c=[];s.forEach(e=>{a.selection.includes(e)&&c.push(e)});let n=null;for(let r=s.length-1;r>=0;r--)if(!a.selection.includes(s[r])){n=s[r];break}n&&(t.area(a.activeArea),t.select(...a.selection),t.reorder(n))},Pe=(e,t,i)=>{t.setParams({clone:!0,clone_empty:!0,coordspace:"design",id:i.designId,returnallareas:!0,rvtype:"none"}),i.collabId&&t.setParams({collab:i.collabId})},Te=(e,t,i)=>{const a=e.design;c()(i.nameValuePairs,(e,i)=>{const s=a.templates.find(e=>e.urlkey===i),c=`t_${i}_${Object(g.h)(s.type)?"iid":"txt"}`;t.setParams({[c]:e})})},we=(e,t)=>{t.save()},Re=(e,t)=>{t.saveFeatures()},ze=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.colors(i.count,i.colors,i.reset)},xe=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea),t.fill(i.fill)},Ne=(e,t,i)=>{const a=e.design;a.areas&&Object.keys(a.areas).map(e=>{t.area(a.areas[e]),t.fill(i.fill)})},Me=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.setImage(i.props)},Le=(e,t,i)=>{const a=e.design;i.names.map(e=>{Object.keys(a.areas).map(s=>{Object.keys(a.areas[s].objects).includes(e)&&(t.area(s),t.select(e),t.setImage(i.props))})})},Fe=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.setPath(i.props)},Ge=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.setQRCode(i.props)},Ve=(e,t,i)=>{const a=e.design,s=i.names||a.selection;a.activeArea&&t.area(a.activeArea),t.select(...s),t.set(i.props)},Be=(e,t,i)=>{const a=e.design;c()(i.valuesByArea,(e,i)=>{t.area(i),e&&e.trim()?t.text({name:et,override:!0,value:e}):a.areas[i].childnames.length>0&&(t.select("*"),t.delete())})},Ue=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;t.select(...s),t.setText(i.props)},qe=(e,t,i)=>{t.setParam("title",i.title)},$e=(e,t,i)=>{const a=e.design,s=i.names||a.selection;t.select(...s),i.fillmode&&t.set({fillmode:i.fillmode});const{template:c}=i;t.template(c.urlkey,c.title,c.ppshow,c.forcereplace)},Je=(e,t,i)=>{t.setParams(Object(a.a)(Object(a.a)({},i.attributes),{},{clone:!0,keep_collab:!0,returnallareas:!0,topdt:i.productType,transferMode:i.transferMode||"featurizedlite"})),i.initialDesignId&&t.setParams({id:i.initialDesignId})},He=(e,t,i)=>{i.area&&t.area(i.area),t.viewdata()},We=(e,t,i)=>{t.undo(i.revision)},Ze=(e,t)=>{const i=e.design;t.select(...i.selection),t.ungroup()},Qe=(e,t,i)=>{const a=e.design;a.activeArea&&t.area(a.activeArea);const s=i.names||a.selection;if(t.select(...s),i.copy&&(t.copy(),t.paste()),i.scale){const e=ae.p(i.scale,[0,0],[1e3,1e3]);t.scale({abs:i.abs,space:"object",xscale:e[0],yscale:e[1]})}null!=i.rotate&&t.rotate(i.rotate,i.abs),(i.position||i.offset)&&t.move({x:i.position&&i.position[0],y:i.position&&i.position[1],dx:i.offset&&i.offset[0],dy:i.offset&&i.offset[1],space:i.space,target:i.target}),i.transientDesign&&t.setParam("glyphs",e.renderDesign&&"textGlyph"===e.renderDesign.mode)},Ye=(e,t,i)=>{const a=e.design;i.names.map(e=>{Object.keys(a.areas).map(s=>{if(Object.keys(a.areas[s].objects).includes(e)){if(t.area(s),t.select(e),i.copy&&(t.copy(),t.paste()),i.scale){const e=ae.p(i.scale,[0,0],[1e3,1e3]);t.scale({abs:i.abs,space:"object",xscale:e[0],yscale:e[1]})}null!=i.rotate&&t.rotate(i.rotate,i.abs),(i.position||i.offset)&&t.move({x:i.position&&i.position[0],y:i.position&&i.position[1],dx:i.offset&&i.offset[0],dy:i.offset&&i.offset[1],space:i.space,target:i.target})}})}),i.transientDesign&&t.setParam("glyphs",e.renderDesign&&"textGlyph"===e.renderDesign.mode)};var Xe=i(323);const et="t1";function*tt(e){const t=Object(U.e)(yield Object(j.k)(),e._stateKey),i=Object(a.a)(Object(a.a)({},t.renderDesign),{},{areas:p()(t.design.areas,e=>({objects:p()(e.objects,()=>({version:t.design.revision}))}))});yield Object(j.i)(G.Ic(e._stateKey,i))}function it(e,t,i=!1){var a;const s=null!==(a=e.design)&&void 0!==a?a:e.transientDesign,c=new ie(e.clientVersion||"full");return i||c.setParams(s.attributes),c.setParams({coordspace:s.coordspace,culture:Object(I.a)().culture,globalrevision:s.globalrevision,id:s.id,max_dim:s.max_dim,readonly:!1,rvtype:"product",title:s.title,view:s.activeView||s.attributes.view}),t&&c.setParam("internal",!0),e.transferMode&&"default"!==e.transferMode&&c.setParam("transferMode",e.transferMode),c}function*at(e){const t=it(Object(U.e)(yield Object(j.k)(),e._stateKey),!1);t.setParams({clone:!0});const i=yield Object(j.c)([t,t.callServer]);if(!Object(h.b)(i)){const t=Object(k.d)(yield Object(j.k)()),a=e.standalone?t("WwwPag","create/designtool",{dz:i.id}):t("WwwPag","pd/spp",{dz:i.id});window.location.href=a}}function*st(e){const t=Object(Q.b)(yield Object(j.k)(),e._stateKey);t&&t.design&&!t.design.readonly&&(yield Object(j.i)(G.ec(e._stateKey)))}function*ct(e){const t=yield Object(j.k)(),i=Object(Q.b)(t,e._stateKey),a=Object(x.d)(t,i.productStateKey).realviews,s=yield Object(j.c)(H,i,a,e.transientDesign,e.view,e.area,e.viewType);yield Object(j.i)(G.uc(e._stateKey,s)),e.transientDesign||(yield Object(j.c)(Ot,e._stateKey)),e.transientDesign||(yield Object(j.i)(G.Sb(e._stateKey))),yield Object(j.i)(Object(Y.b)(e.uid))}function*nt(e){const t=Object(A.a)(yield Object(j.k)())("String","ZUI","RenderDesignMode","none");yield Object(j.i)(G.Ic(e._stateKey,{mode:t})),e.initialDesignSettings&&(yield Object(j.i)(G.Jc(e._stateKey,e.initialDesignSettings,!1)));const i=e.transientDesign,s=yield Object(j.k)(),c=Object(Q.b)(s,e._stateKey),n=new ie(c.clientVersion||"full");e.productOption&&n.setParams(e.productOption),i||(yield Object(j.i)(G.Tb(e._stateKey))),n.setParams({clone_clear_simpletext:!0,clone_empty:!0,coordspace:"design",culture:Object(I.a)().culture,glyphs:c&&"textGlyph"===c.renderDesign.mode,id:e.designId,pdt:e.productType,readonly:i,returnallareas:!0,rvtype:"none"}),s.page.internalEditMode&&n.setParam("internal",!0),e.templateOverrides&&n.setParams(e.templateOverrides),e.transferDesignId&&n.setParams({clone:!0,id:e.transferDesignId,topdt:e.productType,transferMode:"featurizedlite"}),e.transferMode&&"default"!==e.transferMode&&(yield Object(j.i)(G.zc(e._stateKey,e.transferMode)),n.setParam("transferMode",e.transferMode));const r=yield Object(j.c)([n,n.callServer]);if(Object(h.b)(r))yield Object(j.i)(G.rc(e._stateKey,e.productStateKey)),yield Object(j.i)(G.vc(e._stateKey)),yield Object(j.i)(G.kc(e._stateKey,r));else{const s=r.csamode;if(s&&s.length>0&&t!==s&&(yield Object(j.i)(G.Ic(e._stateKey,{mode:s}))),yield Object(j.i)(G.rc(e._stateKey,e.productStateKey)),yield Object(j.i)(G.vc(e._stateKey)),e.productStateKey){const t=Object(x.d)(yield Object(j.k)(),e.productStateKey);u()(t.attributes,e=>{const t=r.attributes[e.name];return e.value!==t})&&(yield Object(j.c)(R.b,e.productStateKey,r.attributes))}if(e.activeArea)r.activeArea=e.activeArea;else if(e.preferredRealviewId){const t=Object(x.d)(yield Object(j.k)(),e.productStateKey).realviews,{designAreaName:i}=Object(v.a)(t,"Design",e.preferredRealviewId,null,r);i&&(r.activeArea=i)}if(yield Object(j.i)(G.ic(e._stateKey,Object(a.a)({},r),i)),e.activeArea){const t=G.Ac(e._stateKey,null,e.activeArea,"Design",i,e.excludePickerData);yield Object(j.i)(t),yield Object(Y.c)(t)}else if(e.preferredRealviewId){const t=G.Ac(e._stateKey,e.preferredRealviewId,null,"Design",i,e.excludePickerData);yield Object(j.i)(t),yield Object(Y.c)(t)}else i||e.excludePickerData||(yield Object(j.i)(G.Sb(e._stateKey)));e.transferDesignId&&Object(ee.h)(te.a.DPLDesignIsLoaded())}yield Object(j.i)(Object(Y.b)(e.uid))}let rt=0;function*ot(e,t){yield*lt(e,null,t)}function*lt(e,t,i){const a=i.transientDesign||!1;if(a||i.type===G.J||(yield Object(j.i)(G.Ec(i._stateKey,{serverState:"waiting"}))),i.type===G.l){const e=i;yield Object(j.i)(G.Ec(i._stateKey,{activeArea:e.toAreaName},void 0,a))}else if(i.type===G.bb){const e=i;yield Object(j.i)(G.Ec(i._stateKey,{title:e.title}));const t=Object(Q.b)(yield Object(j.k)(),i._stateKey),a={title:e.title};e.byUser&&(a.hasUserTitle=!0),yield Object(j.i)(Object(w.fb)(a,t.productStateKey))}!function(e,t){const i=Object(U.e)(e,t._stateKey),a=m.b(i.design),s=i.design.selection.map(e=>a.objects[e]).filter(Boolean),c=s.some(e=>"image"===e.type||"path"===e.type),n=s.some(e=>"text"===e.type),r=()=>{c&&Object(Xe.o)("ModifiedImageObject"),n&&Object(Xe.o)("ModifiedTextObject")};switch(t.type){case G.d:break;case G.m:case G.x:case G.Q:case G.ab:r();break;case G.D:t.type===G.D&&t.scale&&r()}}(yield Object(j.k)(),i);let s=yield Object(j.k)(),c=Object(Q.b)(s,i._stateKey);const n=i.type===G.wb.SELECT_DESIGN_TEMPLATE,r=it(c,s.page.internalEditMode,n);let o;r.setParams({readonly:a}),a||r.setParam("glyphs",c.renderDesign&&"textGlyph"===c.renderDesign.mode),a||(yield Object(j.i)(G.Jc(i._stateKey,{persistentSaveIsStale:!0}))),e(c,r,i),rt++;try{o=yield Object(j.c)([r,r.callServer]),s=yield Object(j.k)(),c=Object(Q.b)(s,i._stateKey)}catch(b){o=x.b}if(!(yield Object(j.c)(bt,i._stateKey,o,!1,i,r.getResponseTime())))return;const l=Object(Q.b)(yield Object(j.k)(),i._stateKey);if(!a&&t){const e=t(l.design,i);if(e)for(const t of e)yield Object(j.i)(t)}var d;if(a||i.type===G.J||i.type===G.o||i.type===G.wb.CHANGE_OPTIONS&&Object(Xe.p)(l.settings.activeContentTab)||[G.bb,G.p].includes(i.type)||(yield Object(j.i)((d=i._stateKey,{_stateKey:d,type:"Design/Saga/REQUEST_DEBOUNCED_SAVE",uid:Object(Y.a)()}))),i.type===G.Z&&(yield Object(j.i)(Object(w.O)(l.productStateKey))),rt--,a||0!==rt||(yield Object(j.i)(G.Yb(i._stateKey))),i.type===G.d){const e=i;yield Object(j.g)(vt,e.imageids)}else if(i.type===G.e){const e=i;yield Object(j.g)(vt,e.imageids)}else if(i.type===G.Q){const e=i.props.imageid;e&&(yield Object(j.g)(vt,[e]))}else if(i.type===G.Z){const e=i;for(const t in e.nameValuePairs){const e=l.design.templates.find(e=>e.urlkey===t);e&&Object(g.h)(e.type)&&(yield Object(j.g)(vt,[e.value]))}}const u=i;u.uid&&(yield Object(j.i)(Object(Y.b)(u.uid)))}function*dt(e){const t=Object(Q.b)(yield Object(j.k)(),e._stateKey),i=null==t?void 0:t.design;i&&"waiting"===i.serverState&&(yield Object(j.m)(G.r)),yield Object(j.i)(e.updateAction)}function*ut(e){yield Object(j.c)(bt,e._stateKey,e.response,!0),yield Object(j.i)(Object(Y.b)(e.uid))}function*bt(e,t,i=!1,a,s){const c=!!a&&a.transientDesign;if(Object(h.b)(t))return i||(yield Object(j.i)(G.kc(e,t))),!1;{const i=Object(Q.b)(yield Object(j.k)(),e),n=Object(U.c)(i,c),r=Object(x.d)(yield Object(j.k)(),i.productStateKey);let o=i,l=t;const d=n&&n.globalrevision&&l.globalrevision&&l.globalrevision>1&&l.globalrevision<n.globalrevision;let u=!1;const b=a&&a.type===G.J;if(!d&&!b)if(a&&a.type===G.o){const e=a;e.clone&&(yield Object(j.i)(G.Jc(e._stateKey,{isFinished:!0})),yield Object(j.i)(G.Ec(e._stateKey,{id:l.id})))}else{const t=a&&a.type===G.wb.CHANGE_OPTIONS||l.type!==r.productType,s=yield Object(j.c)(J,{driverAction:a,oldDesignState:i,oldProduct:r,overrideAreas:t,responseDesign:l,transient:c});o=s.designState,l=Object(U.b)(o,c),a&&!c&&(u=!0);const d=s.product.productOption!==r.productOption,b=s.product.productType!==n.type,p=[Object(P.c)(s.entities),Object(w.fb)(s.product,s.product.stateKey,b),G.uc(e,o)];c||p.push(G.ic(e,{},!0)),yield Object(j.i)(Object(S.a)(p)),d&&(yield Object(j.i)(Object(w.O)(r.stateKey)),yield Object(j.i)(Object(X.d)(r.stateKey)))}if(a&&!c&&a.type!==G.J){if(!u){const t=pt(a,l);t&&(yield Object(j.i)(G.Ic(e,t)))}l.globalrevision%5==1&&Object(ee.h)(te.a.DesignToolStats(l.globalrevision,s,o.renderDesign.mode))}return!0}}function pt(e,t){const i={areas:{}};if(e.renderInvalidate)if(e.templateNames&&e.templateNames.length>0)for(const a of Object.values(t.areas)){const s=Object(f.c)(a).filter(t=>e.templateNames.find(e=>e===t.urlkey)).map(e=>e.name);s.length>0&&(i.areas[a.name]={objects:l()(s.map(e=>[e,{version:t.globalrevision}]))})}else{let a;e.invalidateAll?a=m.c(t).map(e=>e.name):(a=e.names||t.selection,a=m.e(t,a).flatMap(e=>m.c(t,e)).map(e=>e.name)),e.predicate&&(a=m.e(t,a).filter(t=>e.predicate(t)).map(e=>e.name)),a&&a.length>0&&(i.areas[t.activeArea]={objects:l()(a.map(e=>[e,{version:t.globalrevision}]))})}return Object.values(t.areas).forEach(e=>{i.areas[e.name]=Object(a.a)({layers:l()(e.layers.filter(e=>e.changed).map(e=>[e.name,{version:t.globalrevision}]))},i.areas[e.name])}),Object.keys(i.areas).length>0?i:null}function*Ot(e){const t=Object(K.g)(e),i=Object(K.d)(yield Object(j.k)(),t),a=Object(U.e)(yield Object(j.k)(),e);i&&i.driverId===i.myId&&(yield Object(j.i)(D.b.informUiChanged(t,{targetArea:a.design.activeArea})))}function*yt(e){const t=Object(x.d)(yield Object(j.k)(),e._stateKey);let i=Object(Q.b)(yield Object(j.k)(),t.designStateKey),a="";a=t.isCustomizing?i.design.activeArea:Object(z.f)(t);const s=G.Mc(t.designStateKey,a,!0);yield Object(j.i)(s),yield Object(Y.c)(s),yield Object(j.i)(G.Jc(t.designStateKey,{isPromptingToFocusArea:{triggeredByAreaSwitch:e.triggeredByAreaSwitch}}));const c=yield Object(j.m)(G.wb.PROMPT_FOCUS_AREA_RESULT);if("resize"===c.option||"preservesize"===c.option){const e=yield Object(j.k)();i=Object(Q.b)(e,t.designStateKey);const a=m.b(i.transientDesign),s=null==a?void 0:a.contentoutline;if(s){if(!t.isCustomizing){const e=Object(w.J)(i.productStateKey,a.name);yield Object(j.i)(e),yield Object(Y.c)(e)}yield Object(j.i)(G.Rb(t.designStateKey,s,"resize"===c.option))}}yield Object(j.i)(G.Jc(t.designStateKey,{isPromptingToFocusArea:null}))}function*jt(e){let t=yield Object(j.k)();const i=Object(A.a)(t),s=Object(Q.b)(t,e._stateKey);if(i("Boolean","Z4","EnableDesignTemplateConfirmation",!1)&&s.design.revision>1){yield Object(j.i)(G.Jc(e._stateKey,{isShowingDesignReplaceConfirmationDialog:!0}));const t=yield Object(j.m)([G.wb.SELECT_DESIGN_TEMPLATE_CONFIRM,G.wb.SELECT_DESIGN_TEMPLATE_DENY]);if(yield Object(j.i)(G.Jc(e._stateKey,{isShowingDesignReplaceConfirmationDialog:!1})),t.type===G.wb.SELECT_DESIGN_TEMPLATE_DENY)return}t=yield Object(j.k)();const c=Object(K.d)(t,Object(K.g)(e._stateKey)),n=c&&c.collabId,r=Object(a.a)(Object(a.a)({},e),{},{collabId:n});yield Object(j.g)(ot,Pe,r)}function*gt(e){yield Object(j.i)(G.Jc(e._stateKey,{isSaving:!0}))}function*mt(e){const t={departmentMatchType:"digitalDepartment",parameters:"cg="+Object(A.a)(yield Object(j.k)())("String","Z4","FormatsTabStoreCategory",""),type:"SearchResultsData"};let i;try{i=yield Object(j.c)(E.c,"/svc/z3/storeproductssearch/GetSearchWithProperties",t)}catch(a){}i&&i.success&&(yield Object(j.i)(G.nc(e._stateKey,i.data.search.searchResultsData.products)))}function*ft(e){const t=yield Object(j.k)(),i=Object(Q.b)(t,e._stateKey),a=Object(x.d)(t,i.productStateKey),s=i.pickerData,c=r()(a.areaGroupsInfo,e=>i.design.activeArea in e.unfilteredDesignAreas),n=c?a.areaGroupsInfo[c.name].process.name:null;if(n&&(!s.fontsMap[n]||!s.fontColorsMap[n]||!s.areaFillColorsMap[n])){const t={isZ4:!Object(I.a)().isDisneyIframe,process:n,pt:i.design.type};let a;try{a=yield Object(j.c)(E.c,"/svc/z3/design/getPickerData",t)}catch(o){Object(C.a)(!1,o)}if(a&&a.success){const t={areaFillColorsMap:{[n]:a.data.areaFillColors},fontColorsMap:{[n]:a.data.fontColors},fontsMap:{[n]:a.data.fonts},recentFonts:a.data.recentFonts};yield Object(j.i)(G.Gc(e._stateKey,t))}}}function*ht(e){const t=Object(Q.b)(yield Object(j.k)(),e._stateKey).pickerData.recentFonts,{font:i,_stateKey:a}=e,s=t.indexOf(i),c=t.slice();s>-1&&c.splice(s,1),50===c.length&&c.splice(c.length-1,1),c.splice(0,0,i),yield Object(j.i)(G.Hc(a,c));const n={font:e.font,process:e.process};try{yield Object(j.c)(E.e,"/svc/z3/design/addRecentFont",n)}catch(r){Object(C.a)(!1,r)}}function*vt(e){try{Object(E.c)("/svc/my/recentimages/get",{imageIds:e.join(",")},{throwSoftJsonErrors:!0})}catch(t){Object(C.a)(!1,t)}}function*St(e){const t={color:e.swatch.hexCode,recentColorKey:e.process+e.context};try{yield Object(j.c)(E.e,"/svc/z3/design/addRecentColor",t)}catch(i){Object(C.a)(!1,i)}}function*At(e){let t;try{t=yield Object(j.c)(E.c,"/svc/z3/design/getSettings")}catch(i){Object(C.a)(!1,i)}if(t.success&&t.data){const i=t.data;yield Object(j.i)(G.Jc(e._stateKey,i,!1))}}function*_t(e){if(e.persist)try{yield Object(j.c)(E.e,"/svc/z3/design/updateSettings",Object(a.a)({},e.object))}catch(t){Object(C.a)(!1,t)}}function*It(e){const t=Object(Q.b)(yield Object(j.k)(),e._stateKey).design,i={};c()(e.nameValuePairs,(e,a)=>{const s=t.templates.findIndex(e=>e.urlkey===a);i[s]={value:{$set:e}}});const a=y()(t.templates,i);yield Object(j.i)(G.Ec(e._stateKey,{templates:a}))}const Et=(e,t)=>[G.Jc(t._stateKey,{isFinished:!0})],kt=(e,t)=>{const i={isSaving:!1,persistentSaveIsStale:!1};return[G.Jc(t._stateKey,i)]};function*Ct(e){const t=yield Object(j.k)(),i=Object(Q.b)(t,e._stateKey),a=Object(x.d)(t,i.productStateKey),s=m.b(i.design),c=a.areaGroupsInfo[s.group],n=c.unfilteredDesignAreas[s.name];let r;if(0===m.d(i.design).length&&n.isResizable&&!a.isDigital){let t,i;r=G.zb(e._stateKey,e.ids,!0,!0,!0),yield Object(j.i)(r),yield Object(Y.c)(r),t=Object(Q.b)(yield Object(j.k)(),e._stateKey).transientDesign,i=m.b(t);const a=[i.width,i.height];r=G.zb(e._stateKey,e.ids,!0,!1,!0),yield Object(j.i)(r),yield Object(Y.c)(r),t=Object(Q.b)(yield Object(j.k)(),e._stateKey).transientDesign,i=m.b(t);const s=[i.width,i.height];yield Object(j.i)(G.Jc(e._stateKey,{isPromptingToSizeAreaToImage:{standard:a,custom:s}}));const c=yield Object(j.m)([G.xb.SIZE_AREA_TO_IMAGE_CONFIRM,G.xb.SIZE_AREA_TO_IMAGE_DENY]);yield Object(j.i)(G.Jc(e._stateKey,{isPromptingToSizeAreaToImage:null}));const n=c.type===G.xb.SIZE_AREA_TO_IMAGE_CONFIRM,o=c.type===G.xb.SIZE_AREA_TO_IMAGE_CONFIRM?"standard"===c.mode:void 0;r=G.zb(e._stateKey,e.ids,n,o)}else if("stitch"===c.uiProcess){const i=t.entities.images[e.ids[0]];if(!(i&&n.imageTypes.includes(i.type))){yield Object(j.i)(G.Jc(e._stateKey,{tentativeImageIdToDigitize:e.ids[0]}));const t=yield Object(j.m)([G.xb.STITCH_CONVERSION_CONFIRM,G.xb.STITCH_CONVERSION_DENY]);yield Object(j.i)(G.Jc(e._stateKey,{tentativeImageIdToDigitize:void 0}));if(t.type===G.xb.STITCH_CONVERSION_DENY)return}}r||(r=G.zb(e._stateKey,e.ids)),yield Object(j.i)(r),e.isIcon?Object(Xe.o)("AddIconObject"):Object(Xe.o)("AddImageObject"),yield Object(Y.c)(r);const o=Object(Q.b)(yield Object(j.k)(),e._stateKey),l=m.f(o.design);if(l.length>0&&l.every(e=>"image"===e.type)&&"halftone"===c.uiProcess){const t=c.imageFilterPresetIds.includes("halftone")?"halftone":c.imageFilterPresetIds[0],i=G.oc(e._stateKey,{filter:t});yield Object(j.i)(i),yield Object(Y.c)(i),yield Object(j.i)(G.Jc(e._stateKey,{isShowingHalftoneDialog:!0}))}"stitch"===c.uiProcess&&(yield Object(j.i)(Object(w.O)(o.productStateKey)))}function*Kt(e){yield Object(j.i)(G.yb.imagesSetLoading(e._stateKey,{loading:e.type===G.xb.IMAGE_BROWSER_SEARCH?"search":"nextPage"}));const t=yield Object(j.k)(),i=Object(Q.b)(t,e._stateKey),a=Object(x.d)(t,i.productStateKey),s=m.b(i.design),c=a.areaGroupsInfo[s.group];let n,r;e.type===G.xb.IMAGE_BROWSER_SEARCH?(n=1,r=e.query):(n=i.imageBrowser.page.pageNum+1,r=i.imageBrowser.query);const o={feedIdStr:"0",page:{pageNum:n,pageSize:i.imageBrowser.page.pageSize},search:{imageFilterType:"stitch"===c.uiProcess?T.a.Stitch:T.a.Print,searchTerm:r,sortDirection:"desc",sortOrder:"date_sort"}};let l;try{l=yield Object(j.c)(E.c,"/svc/my/mediabrowser/getFeedPage",{Params:JSON.stringify(o)})}catch(d){}l&&l.success?yield Object(j.i)(Object(S.a)([Object(P.c)(l.data.entities),G.yb.imagesReceivePage(e._stateKey,{page:l.data.page,query:r})])):yield Object(j.i)(G.yb.imagesSetLoading(e._stateKey,{loading:null}))}function*Dt(e){const t=Object(Q.b)(yield Object(j.k)(),e._stateKey),i=Object(x.d)(yield Object(j.k)(),t.productStateKey);let a;try{a=yield Object(j.c)(E.c,"/svc/z3/guidefiles/getguidefiles",{productName:i.productType})}catch(s){}a&&a.success&&(yield Object(j.i)(Object(P.c)(a.data.entities)))}function*Pt(){let e,t;for(;;)e=yield Object(j.m)(G.D),t&&t.isRunning()?e.transientDesign||(t.cancel(),t=yield Object(j.g)(ot,Qe,e)):t=yield Object(j.g)(ot,Qe,e)}function*Tt(){yield Object(j.b)([Object(j.g)(Pt),Object(j.n)(G.ab,ot,Ue),Object(j.n)(G.bb,ot,qe),Object(j.n)(G.ib,ct),Object(j.o)(G.d,ot,se),Object(j.o)(G.e,ot,ce),Object(j.o)(G.f,ot,ne),Object(j.o)(G.g,ot,re),Object(j.o)(G.h,ot,oe),Object(j.o)(G.i,ot,le),Object(j.o)(G.j,ot,de),Object(j.o)(G.k,ot,ue),Object(j.o)(G.l,ot,be),Object(j.o)(G.m,ot,ye),Object(j.o)(G.o,lt,he,Et),Object(j.o)(G.p,ot,ve),Object(j.o)(G.q,nt),Object(j.o)(G.s,ot,Oe),Object(j.o)(G.t,ot,je),Object(j.o)(G.u,ot,ge),Object(j.o)(G.v,ot,me),Object(j.o)(G.w,ot,fe),Object(j.o)(G.x,ot,Se),Object(j.o)(G.y,ot,Ae),Object(j.o)(G.z,ot,_e),Object(j.o)(G.A,ot,Ie),Object(j.o)(G.B,ot,Ee),Object(j.o)(G.C,ot,Ze),Object(j.o)(G.E,ot,Ye),Object(j.o)(G.F,ot,ke),Object(j.o)(G.G,ot,Ce),Object(j.o)(G.H,ot,Ke),Object(j.o)(G.I,ot,De),Object(j.o)(G.J,lt,we,kt),Object(j.o)(G.J,gt),Object(j.o)(G.K,ot,Re),Object(j.o)(G.N,ot,ze),Object(j.o)(G.O,ot,xe),Object(j.o)(G.P,ot,Ne),Object(j.o)(G.Q,ot,Me),Object(j.o)(G.R,ot,Le),Object(j.o)(G.S,ot,Ve),Object(j.o)(G.T,ot,Fe),Object(j.o)(G.V,ot,Ge),Object(j.o)(G.W,ot,Be),Object(j.o)(G.jb,ot,He),Object(j.o)(G.eb,ot,We),Object(j.o)(G.hb,dt),Object(j.o)(G.wb.CHANGE_OPTIONS,ot,pe),Object(j.o)(G.wb.CLONE_AND_REDIRECT,at),Object(j.o)(G.wb.DESIGN_TRANSFER,ot,Je),Object(j.o)(G.wb.FLUSH_RENDER_DESIGN,tt),Object(_.a)(G.wb.HANDLE_RLV_SOCKET_DESIGN_UPDATE,ut),Object(j.o)(G.wb.PROMPT_FOCUS_AREA,yt),Object(j.o)(G.wb.SELECT_DESIGN_TEMPLATE,jt),Object(j.o)(G.lb,ft),Object(j.n)(G.a,ht),Object(j.n)(G.b,St),Object(j.o)(G.kb,mt),Object(j.o)(G.ob,At),Object(j.n)(G.pb,_t),Object(j.n)(G.Z,It),Object(_.a)(G.Z,ot,Te),Object(_.a)(G.db,ot,$e),Object(j.e)(2e3,"Design/Saga/REQUEST_DEBOUNCED_SAVE",st),Object(j.n)(G.c,nt),Object(_.a)(G.xb.ADD_IMAGES,Ct),Object(_.a)([G.xb.IMAGE_BROWSER_SEARCH,G.xb.IMAGE_BROWSER_NEXT_PAGE],Kt),Object(j.o)(G.xb.FETCH_GUIDE_FILES,Dt)])}},659:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return c}));var a,s=i(17);!function(e){e.SEARCH="ZazzleImages/SEARCH",e.RECEIVE_PAGE="ZazzleImages/RECEIVE_PAGE",e.NEXT_PAGE="ZazzleImages/NEXT_PAGE",e.SET_LOADING="ZazzleImages/SET_LOADING",e.UPLOAD="ZazzleImages/UPLOAD"}(a||(a={}));const c={search:e=>Object(s.a)(a.SEARCH,e),nextPage:()=>Object(s.a)(a.NEXT_PAGE),receivePage:e=>Object(s.a)(a.RECEIVE_PAGE,e),setLoading:e=>Object(s.a)(a.SET_LOADING,e),upload:e=>Object(s.a)(a.UPLOAD,e)}},674:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var a=i(0),s=i.n(a),c=i(1),n=i(148),r=i(23),o=i(405),l=i(397);const d=s.a.lazy(()=>i.e(410).then(i.bind(null,1220)));function*u(e){let t;let i,a=!1;function n(){a||(a=!0,i())}const o=new Promise(e=>i=e);let l;const u=window.innerWidth,b=window.innerHeight,p=Math.max(200,u-120),O=Math.max(200,b-300),y=s.a.createElement(d,{aspectRatioPx:e.aspectRatioPx,availableHeight:O,availableWidth:p,exposeGetCrop:e=>{t=e},imageId:e.id,imageType:e.imageType,imageUrl:e.imageUrl,initialCrop:e.initialCrop,message:e.message,minHeightFrac:e.minHeightFrac,minWidthFrac:e.minWidthFrac,useImageMaximum:e.useImageMaximum,onCancel:n,onOk:function(){l=t(),n()},onRequestClose:n,title:e.title});yield Object(c.i)(Object(r.d)(y)),yield Object(c.c)(()=>o),yield Object(c.i)(Object(r.c)(y)),l&&e.callback(l)}const b=Object(n.a)((function*(){yield Object(c.b)([Object(c.n)(l.a.GET_CROP,u),Object(c.g)(o.a)])}))},690:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return n}));const a="ProductCollection/GET_PRODUCT_COLLECTION",s="ProductCollection/UPDATE_PRODUCT_COLLECTION";function c(e="",t=1,i=6,s="",c,n,r=0){return{_stateKey:e,callback:n,data:c,endpoint:s,pageNum:t,pageSize:i,transientPageSizeAdjustment:r,type:a}}function n(e="",t,i,a,c,n){return{type:s,_stateKey:e,pageNum:t,pageSize:i,numResults:a,items:c,extraData:n}}},841:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var a=i(15),s=i(2),c=i(1),n=i(4),r=i(11),o=i(127),l=i(25),d=i(690);function*u(e){const t=yield Object(c.k)(),i=Object(l.b)(t,e._stateKey),{data:u,endpoint:b,pageNum:p,pageSize:O,transientPageSizeAdjustment:y}=e;if(!(i&&i.numResults&&p>Math.floor((i.numResults-1)/O)+1))try{yield Object(c.i)(Object(o.c)(e._stateKey));const t=Object(s.a)({pg:p,ps:O+y},u||{}),i=yield Object(c.c)(n.c,b,t);if(yield Object(c.i)(Object(o.b)(e._stateKey)),i.success&&i.data){const{entities:t,pageData:s}=i.data,{numResults:n,items:o}=s,l=Object(a.a)(s,["numResults","items"]);0!==y&&delete l.pageSize,yield Object(c.i)(Object(r.c)(t)),yield Object(c.i)(Object(d.d)(e._stateKey,p,O,n,o,l)),e.callback&&e.callback()}}catch(j){console.error(j)}}function*b(){yield Object(c.n)(d.a,u)}}}]);